<control-humidity class="control" data-active={ active }>

    <div onClick={ toggle } onUpdate="none" class="control__value">{ $State.get('humidity') }</div>
    <div onClick={ toggle } onUpdate="none" class="control__icon" data-icon="humidity"></div>
    <div class="control__container flex-row-left-center">
        <div class="control__container__title">влагозащищенность</div>
        <div class="nowrap fontSize-0">
            <div onClick={ select } onUpdate="none" each={ item in items } class="pos-rel display-inlineBlock" data-balloon="{ item.tooltip }" data-balloon-pos="up">
                <div class="btn { item.title == $State.get('humidity') ? 'btn-primary' : 'btn-primary-hover' } btn-m w40 p0 mlr-xxs text-center">
                    { item.title }
                </div>
            </div>
        </div>
    </div>

<script>

    var $ = this;

    $.active = false;

    $.items = [
        {
            title: 'P64',
            tooltip: 'Защита от брызгов воды'
        },
        {
            title: 'P65',
            tooltip: 'Защита от струй воды'
        },
        {
            title: 'P66',
            tooltip: 'Сильная струя воды'
        },
        {
            title: 'P67',
            tooltip: 'Погружение под воду'
        }
    ];

    $.toggle = function(){
        $.update({
            active: !$.active
        })
    };

    $.select = function(){
        $State.set('humidity', this.item.title);
        $.hide();
    };

    $.hide = function(){
        $.update({
            active: false
        })
    };

</script>

</control-humidity>
