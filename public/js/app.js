var app=app||{};app.define=function(t){var e,n=t.split("."),o=app;for("app"==n[0]&&(n=n.slice(1)),e=0;e<n.length;e++)"undefined"==typeof o[n[e]]&&(o[n[e]]={}),o=o[n[e]];return o},app.tag=function(t){if(window.riot)return _.filter(riot.vdom,function(e){if(e.root.nodeName.toLowerCase()==t)return e})[0]},window.Store=window.store||{},window.$store={},function(t){app.define("config"),app.define("effects"),app.define("sizes"),app.define("utils"),app.define("plugins"),app.define("device"),app.define("events"),app.define("loader"),app.define("$dom"),app.$dom={html:t("html"),body:t("body"),document:t(document),window:t(window),root:t("#app")},app.events={click:document&&"ontouchstart"in document.documentElement?"tap":"click"},app.keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32},window.KEY=app.keys,app.prefixed={transform:Modernizr.prefixed("transform"),"transform-origin":Modernizr.prefixed("transformOrigin")},$$=window.jQuery,window.moment&&moment.locale("ru"),t.fn.api=function(t){return this.data(t)?this.data(t):this.data(t,{}).data(t)}}($),window.$afterlag={run:function(t,e){var n={delay:0,iterations:1};e&&_.extend(n,e);var o=new Afterlag(n);o.run(t)},xs:function(t,e){var n={iterations:2,timeout:200};e&&_.extend(n,e),$afterlag.run(t,n)},s:function(t,e){var n={iterations:3,timeout:300};e&&_.extend(n,e),$afterlag.run(t,n)},m:function(t,e){var n={iterations:5,timeout:500};e&&_.extend(n,e),$afterlag.run(t,n)},l:function(t,e){var n={iterations:7,timeout:700};e&&_.extend(n,e),$afterlag.run(t,n)},xl:function(t,e){var n={iterations:10,timeout:1e3};e&&_.extend(n,e),$afterlag.run(t,n)}},function(t,e,n,o,i){t.define("compatible"),t.compatible={init:function(t,e){o.isPhone?o.isAndroid&&(!o.verOS||o.verOS&&o.verOS<4.4)?this.render("android"):o.isIOS&&(!o.verOS||o.verOS&&o.verOS<7)?this.render("ios"):o.isAndroid||o.isIOS?t.call(this,e):this.render("unknown"):t.call(this,e)},render:function(t){var e;"android"==t?e="Версия вашего Android должна быть не ниже 4.4":"ios"==t?e="Версия вашей iOS должна быть не ниже 7.0":"unknown"==t&&(e="К сожалению ваше устройство не поддерживается. Android не ниже 4.4 или iOS 7.0"),n.body.append('<div class="incompatible-device"><div class="incompatible-device-wrapper"><svg class="incompatible-device-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path fill="#fff" d="M94.553,36.928c2.689-2.691,2.689-7.07,0-9.761L70.861,3.475c-1.303-1.304-3.036-2.021-4.879-2.021  c-1.844,0-3.577,0.718-4.881,2.022L4.256,60.321c-2.689,2.69-2.689,7.069,0,9.761l23.691,23.689  c0.152,0.152,0.312,0.295,0.475,0.432H14.688c-1.327,0-2.403,1.075-2.403,2.401c0,1.327,1.076,2.403,2.403,2.403h47.691  c1.326,0,2.401-1.076,2.401-2.403c0-1.326-1.075-2.401-2.401-2.401H37.234c0.162-0.137,0.322-0.278,0.473-0.431L94.553,36.928z   M42.95,81.643L16.387,55.078c-0.016-0.016-0.035-0.025-0.051-0.041l41.975-41.974c0.016,0.016,0.026,0.035,0.042,0.051  l26.562,26.563c0.016,0.016,0.035,0.026,0.051,0.042L42.991,81.693C42.976,81.678,42.966,81.658,42.95,81.643z M65.982,6.259  c0.559,0,1.087,0.219,1.482,0.614l23.69,23.692c0.816,0.817,0.816,2.148,0,2.966l-2.802,2.801c-0.016-0.017-0.026-0.036-0.043-0.052  L61.75,9.717c-0.017-0.016-0.035-0.026-0.051-0.042L64.5,6.873C64.896,6.477,65.422,6.259,65.982,6.259z M7.655,66.684  c-0.817-0.817-0.817-2.147,0-2.965l5.293-5.295c0.015,0.018,0.026,0.036,0.042,0.053L39.552,85.04  c0.016,0.017,0.035,0.026,0.052,0.041l-5.294,5.294c-0.792,0.794-2.171,0.791-2.964-0.001L7.655,66.684z"/><path fill="#fff" d="M82.905,28.24c0.344,0.345,0.905,0.345,1.249,0.001c0.344-0.345,0.342-0.905,0-1.248l-7.246-7.246  c-0.346-0.344-0.902-0.345-1.248,0c-0.344,0.344-0.344,0.903,0,1.249L82.905,28.24z"/><circle cx="72.533" cy="16.621" r="0.842"/><circle fill="#fff" cx="22.921" cy="75.107" r="2.759"/></svg><p class="incompatible-device-text">'+e+"</p></div></div>")}}}(app,$$,app.$dom,app.device,app.utils),function(t){t.history=[],t.resources=function(e,n,o){n=n||$.noop,o=o||$.noop;for(var i=[],r=0;r<e.length;r++)t.history.indexOf(e[r])<0&&i.push(e[r]);return i.length?void Modernizr.load({load:i,callback:function(e){t.history.push(e),o()},complete:n}):n()},t.images=function(t,e,n){var o=0;e=e||$.noop,n=n||$.noop,t.imagesLoaded({background:".bg-cover"}).always(e).progress(function(t){o++,n(o,t.images.length)})}}(app.loader),function(t,e){var n=function(){t.width=e.window.width(),t.height=parseInt(window.innerHeight,10)};e.window.on("resize.app",n),n()}(app.sizes,app.$dom),function(t,e){t.support=Modernizr,t.isMobile=t.support.touch,e.html.addClass(t.isMobile?"d-mobile":"d-no-mobile"),t.isRetina=window.devicePixelRatio&&window.devicePixelRatio>1,e.html.addClass(t.isRetina?"d-retina":"d-no-retina");var n=function(){var n=e.window.width();t.isPhone=n<768,t.isTablet=n<1025&&n>767,t.orientation=t.isTablet&&n<1025&&n>991||t.isPhone&&n>480?"landscape":"portrait",e.html.addClass(t.isPhone?"d-phone":"d-no-phone").removeClass(t.isPhone?"d-no-phone":"d-phone").addClass(t.isTablet?"d-tablet":"d-no-tablet").removeClass(t.isTablet?"d-no-tablet":"d-tablet").addClass("landscape"===t.orientation?"r-landscape":"r-portrait").removeClass("landscape"!==t.orientation?"r-landscape":"r-portrait")};if(e.window.on("resize.sizeCheck",n),n(),navigator.userAgent.match(/(iPhone)/i)&&(t.isPhone=!0),navigator.userAgent.match(/iPad/i)&&(e.html.addClass("d-ipad"),t.isIPad=!0),navigator.userAgent.match(/(iPhone|iPod touch)/i)&&(e.html.addClass("d-iphone"),t.isIPhone=!0),navigator.userAgent.match(/(iPad|iPhone|iPod touch)/i)){e.html.addClass("d-ios"),t.isIOS=!0;var o=navigator.userAgent.match(/.*CPU.*OS (\d)_(\d)/i);t.verOS=!(!o||!o[1])&&o[1]+(o[2]?"."+o[2]:"")}else e.html.addClass("d-no-ios");if(navigator.userAgent.match(/.*CPU.*OS 7_\d/i)&&(e.html.addClass("d-ios7"),t.isIOS7=!0),navigator.userAgent.match(/Android/i)){e.html.addClass("d-android"),t.isAndroid=!0;var o=navigator.userAgent.match(/Android (\d)\.(\d)/i);t.verOS=!(!o||!o[1])&&o[1]+(o[2]?"."+o[2]:"")}e.html.hasClass("d-ipad d-ios7")&&e.window.on("resize orientationchange focusout",function(){window.scrollTo(0,0)}),t.isWin=navigator.platform.indexOf("Win")>-1,t.isMac=navigator.platform.indexOf("Mac")>-1,t.isLinux=navigator.platform.indexOf("Linux")>-1,e.html.addClass(t.isMac?"d-macOS":"d-no-macOS"),t.isSafari=/constructor/i.test(window.HTMLElement),e.html.addClass(t.isSafari?"d-safari":"d-no-safari"),t.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e.html.addClass(t.isFirefox?"d-firefox":"d-no-firefox"),t.isMobile&&window.FastClick&&"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1)}(app.device,app.$dom),function(t,e){t.light={},t.light.show=function(t,n,o,i){t[0].style.opacity=1,t[0].style[e.transform]="translateY("+Math.round(o-n*o)+"px) translateZ(0)",0==n&&(t[0].style[e.transform]="translateY(110%)")},t.light.hide=function(t,n,o,i){t[0].style.opacity=(1-.4*n).toFixed(3),t[0].style[e.transform]="translateY("+Math.round(-(i-1)*o-n*o*.5)+"px) translateZ(0)",1==n&&(t[0].style[e.transform]="translateY(-110%)"),0==n&&(t[0].style[e.transform]="translateY("+Math.round(-(i-1)*o)+"px) translateZ(0)")},t.light.move=function(t,n,o){t[0].style.opacity=1,t[0].style[e.transform]="translateY("+Math.round(-n*o)+"px) translateZ(0)"},t.space={},t.space.show=function(t,n){t[0].style.opacity=.33+.67*n;var o="";0==n?o="translate3d(110%, 0, 0)":app.device.isPhone?o="perspective(500px) translate3d("+(-8+8*n)+"%, 0, 0) rotateY("+(-6+6*n)+"deg) scale("+(.8+.2*n)+")":(o="perspective(500px) translate3d("+(-4+4*n)+"%, 0, 0) scale("+(.9+.1*n)+")",app.device.isFirefox||(o=o+"rotateY("+(-4+4*n)+"deg)")),t[0].style[e.transform]=o},t.space.hide=function(t,n){t[0].style.opacity=1,t[0].style[e.transform]="translate3d("+-100*n+"%, 0, 0)",1==n&&(t[0].style[e.transform]="translate3d(-110%, 0, 0)")},t.fold={},t.fold.show=function(t,n){t[0].style.opacity=1,t[0].style[e.transform]="translateY("+(100-100*n)+"%)"},t.fold.hide=function(t,n){t[0].style.opacity=1-.67*n,t[0].style[e.transform]="perspective(500px) translateY("+4*n+"%) rotateX("+3*-n+"deg) scale("+(1-.05*n)+")",1==n&&(t[0].style[e.transform]="translateY(-101%)")}}(app.effects,app.prefixed),function(t,e){e.init=function(n){if(n){var o,i=n.split("."),r=t;for(o=0;o<i.length;o++)r=r[i[o]];r&&"function"==typeof r.init?(r.init(),e.log("Initialize: <"+n+"> ready")):e.log("ERROR: <"+n+"> initialize")}},e.is=function(n,o){if(n){var i,r=n.split("."),a=t;for(i=0;i<r.length;i++)a=a[r[i]];a?o&&"function"==typeof o&&o():e.log("NOT found: <"+n+">")}},e.log=function(t){t&&("object"==typeof t?console.dir(t):console.log(t))},e.logger=function(t,n){t&&n&&("init"===t?e.log("Initialize: <"+n+"> ready"):"open"===t?e.log("OPEN: <"+n+">"):"close"===t?e.log("CLOSE: <"+n+">"):e.log(t+": <"+n+">"))},e.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.template=function(n,o,i){if(!t.templates[n])return void e.log("NOT found: <"+n+"> template");var r=Mustache.render(t.templates[n](),o?o:{}),a=$(r).appendTo(i?i:t.$dom.root);return a},e.copyArray=function(t){var n=null===t?null:e.isObject(t)?{}:[];for(var o in t)"object"==typeof t[o]&&"prototype"!==o?n[o]=e.copyArray(t[o]):n[o]=t[o];return n},e.sortArray=function(t,e,n){var o=_.sortBy(t,function(t){return t[e]});return"desc"===n?o.reverse():o},e.isArray=function(t){if(t&&"[object Array]"===Object.prototype.toString.call(t))return!0},e.isFunction=function(t){if(t&&"function"==typeof t)return!0},e.fixTouchScroll=function(e,n){var o=null,i=null;e.on("touchmove MSPointerMove",function(e){if(0===i){var n=e.changedTouches[0].clientY;n<o?(o=0,e.preventDefault()):t.device&&t.device.isIOS?setTimeout(function(){o=n},1e3):o=n}}),n.on("scroll",function(){i=this.scrollTop})},e.raf=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return e?e(t):window.setTimeout(t,1e3/60)},e.caf=function(t){var e=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;e(t),t=null},e.support={transitions:Modernizr.csstransitions},e.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},e.transEndEventName=e.transEndEventNames[Modernizr.prefixed("transition")],e.animEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},e.animEndEventName=e.animEndEventNames[Modernizr.prefixed("animation")],e.onEndTransition=function(t,n){var o=function(t){if(e.support.transitions){if(t.target!=this)return;this.removeEventListener(e.transEndEventName,o)}n&&"function"==typeof n&&n.call(this)};e.support.transitions?t.addEventListener(e.transEndEventName,o):o()},e.onEndAnimation=function(t,n){var o=function(t){if(e.support.transitions){if(t.target!=this)return;this.removeEventListener(e.animEndEventName,o)}n&&"function"==typeof n&&n.call(this)};e.support.transitions?t.addEventListener(e.animEndEventName,o):o()},e.onLoadImage=function(t,e){function n(){r||(r=!0,e(!0))}function o(){e(!1)}var i=new Image,r=!1;i.src=t,i.onerror=o,i.onload=n,i.complete&&n()},e.getSizeImage=function(t,e){function n(){r||(r=!0,e(i.naturalWidth,i.naturalHeight))}function o(){e(!1)}var i=new Image,r=!1;i.src=t,i.onerror=o,i.onload=n,i.complete&&n()},e.getScroll=function(t){var e=t.x*-1,n=t.y*-1,o=t.maxScrollX*-1,i=t.maxScrollY*-1;return{x:e,y:n,maxX:o,maxY:i}},e.throttle=function(t,e){var n=!0;return function(o){n&&(n=!1,setTimeout(function(){n=!0},e),t(o))}},e.debounce=function(t,e,n,o){3==arguments.length&&"boolean"!=typeof n&&(o=n,n=!1);var i;return function(){var r=arguments;o=o||this,n&&!i&&t.apply(o,r),clearTimeout(i),i=setTimeout(function(){!n&&t.apply(o,r),i=null},e)}},e.indexOf=function(t,e,n){for(var o=n||0,i=(t||[]).length;o<i;o++)if(t[o]==e)return o;return-1},e.inArray=function(t,n){return e.indexOf(t,n)!=-1},e.trim=function(t){return(t||"").replace(/^\s+|\s+$/g,"")},e.underscored=function(t){return e.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},e.numberFormat=function(t,e,n,o){if(isNaN(t)||null==t)return"";t=parseInt(t).toFixed(~~e),o="string"==typeof o?o:",";var i=t.split("."),r=i[0],a=i[1]?(n||".")+i[1]:"";return r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+o)+a},e.clean=function(t,n){return t=_.escape(e.trim(t)),t?t:n?n:null},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isEmail=function(t){return t.match(/.+@.+\..+/i)},e.newId=function(){return String(Math.round((new Date).getTime()/1e3))},e.getDateNow=function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),o=t.getSeconds(),i=t.getMonth()+1,r=t.getDate(),a=t.getFullYear();return e<10&&(e="0"+e),n<10&&(n="0"+n),o<10&&(o="0"+o),i<10&&(i="0"+i),r<10&&(r="0"+r),a+"-"+i+"-"+r+" "+e+":"+n+":"+o},e.bbUpdate=function(t,e){t.on("update",function(t){var n=t.data&&t.data.transaction&&t.data.transaction.length&&t.data.transaction[0].path?t.data.transaction[0].path[0]:null,o=t.data&&t.data.transaction&&t.data.transaction.length?t.data.transaction[0].value:null;e(n,o,t)})},window._?_.extend(_,e):window._=e,t.utils=window._}(app,app.utils),function(){app.url=function(){return app.config.domain+app.config.api},app.fetch=function(t){var e=[],n=[],o=t.split(", ");return new Promise(function(t,r){for(i=0;i<o.length;i++)_.isFunction(app.fetch.API[o[i]])&&e.push(o[i]);o.length!==e.length&&(n=_.difference(o,e)),Promise.all(e.map(app.fetch.API).concat(n.map(app.request))).then(function(e){t(e)})})},app.request=function(t,e){return new Promise(function(n,o){var i=_.underscored(t).replace(/^(get|set|add|del)/g,"").replace(/_/g,"/"),r=null;if(t.match(/^get/)?r="GET":t.match(/^set/)?r="PUT":t.match(/^add/)?r="POST":t.match(/^del/)&&(r="DELETE"),!r)return void o("Error type request: "+t);"GET"===r&&e&&(i+="/"+e,e=null),window.$LoaderAjax&&$LoaderAjax.show();var a=new XMLHttpRequest;a.open(r,app.url()+i,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json");try{app.request.list&&app.request.list.method===t&&app.request.list.params==JSON.stringify(e)&&app.request.list.xhr.abort(),a.send(e?JSON.stringify(e):{})}catch(t){}a.onload=function(t){try{if(200==this.status){var e=JSON.parse(this.response);n("OK"===e.status&&e.result?e.result:e)}else{app.errHandler(this.status);var i=new Error(this.statusText);i.code=this.status,o(i)}}catch(t){}app.request.list={},window.$LoaderAjax&&$LoaderAjax.hide()},a.onerror=function(){o(new Error("Network Error")),window.$LoaderAjax&&$LoaderAjax.hide()};try{app.request.list={method:t,xhr:a,params:JSON.stringify(e)}}catch(t){}})},app.errHandler=function(t){401==t?window.$Notify?$Notify.show({color:"info",text:"Авторизируйтесь снова"}):alert("Авторизируйтесь снова"):window.$Notify?$Notify.show({color:"danger",text:"Ошибка проведения операции повторите ее чуть позже"}):alert("Ошибка проведения операции повторите ее чуть позже")},window.onerror=function(t,e,n){app&&app.config&&app.config.logger&&app.config.logger.report&&app.request(app.config.logger.method,{msg:t,line:n,url:e,date:_.getDateNow(),version:null,platform:null,type:"error"})}}(),app.fetch.API=function(t){return app.fetch.API[t]()},app.fetch.API.getDataInit=function(){return new Promise(function(t,e){app.request("getDataInit").then(function(e){$store.products.set(e.products?e.products:[]),$store.packages.set(e.packages?e.packages:[]),t(e)})})},app.config={domain:"",api:"/public/api",logger:{method:"addLog",report:!1},share:{title:"LEDTop-Shop.ru - светодиодные компоненты. НОВИНКИ! РАСПРОДАЖА! СКИДКИ!"},changeStyles:!0},function(t){t.define("plugins.tutorial.podbor"),t.plugins.tutorial.podbor=[function(){return{figure:"square",target:"section-packages-select",position:"down",padding:20,title:"Выбор готовых наборов",text:"Вы можете выбрать готовые наборы компонентов. Все наборы прошли тщательный отбор и сохраняют отличный баланс между ценой и предложением."}},function(){return{figure:"square",target:"product-item[data-product='ledribbon']",position:"right",padding:10,title:"Светодиодная лента",text:'Мы вам предлагаем пройти обзор по интерфейсу. Это займет не более одной минуты. Перед вами один из трех и основной компонент набора, светодиодная лента. Фото, описание, класс и указание цены за метр. Чтобы перейти на следующий шаг нажмите "Далее".'}},function(){return{figure:"circle",target:"product-item[data-product='ledribbon'] .product__select",position:"right",padding:20,title:"Открыть предложения",text:"Открываем предложения светодиодных лент. Мы подготовили для вас несколько вариантов для каждого из компонентов. Сейчас ваши действия не активны, но после прохождения обзора вы сможете все выбрать."}},function(){return{figure:"square",target:"product-item[data-product='power']",position:"left",padding:30,actions:{toggle:function(t){$Product.ledribbon.tags["products-list"].toggle()}},title:"Предложения",text:'Предложения поделены на группы: "LUX", "Норма" и "Эконом". Вы можете выбрать любое предложение ориентируясь на свой бюджет. На самом деле вариантов гораздо больше, вы сможете настроить требуемые параметры и предложения сразу адаптируются под ваши требования.'}},function(){return{figure:"circle",target:"product-item[data-product='power'] .connect__control",position:"left",padding:30,activeZone:!0,title:"Управление освещением",text:"Если вам не требуется управлять своим будущим освещением, просто нажмите на эту кнопку."}},function(){return{figure:"square",target:"control-light",position:"right",width:380,height:170,offset:{top:-67},actions:{toggle:function(t){$Control.light.toggle()}},title:"Тип освещенности",text:'Варианты освещенности вашей подстветки, это: "монохромная", "мультицветная" или "бегущий огонь".'}},function(){return{figure:"square",target:"control-length",position:"right",width:400,height:170,offset:{top:-67},actions:{toggle:function(t){$Control.length.toggle()}},title:"Длина ленты",text:"Один из наиболее важных параметров. Измерьте требуемую длину для светодиодной ленты. Изменив, длину вы получите новые предложения по всем компонентам, максимально отвечающим вашим новым требованиям."}},function(){return{figure:"square",target:"control-color",position:"right",width:620,height:170,offset:{top:-67},actions:{toggle:function(t){$Control.color.toggle()}},title:"Цвет освещения",text:"Вы можете выбрать нужный вам цвет вашего освещения."}},function(){return{figure:"square",target:"control-humidity",position:"right",width:380,height:170,offset:{top:-67},actions:{toggle:function(t){$Control.humidity.toggle()}},title:"Влагозащищенность",text:"Выбор влагозащищенности ваших компонентов от брызгов воды или попадания под струю воды."}},function(){return{figure:"square",target:".section__control .total",position:"right",padding:20,title:"Итоговая цена",text:"Итоговая цена за весь выбранный комплект."}},function(){return{figure:"circle",target:".control .button__ok",position:"right",padding:15,title:'Кнопка "Все ОК!"',text:"После того, как вы закончите свой выбор, нажмите на эту кнопку, чтобы отправить предзаказ и связаться с нашим менеджером для дальнейшей консультации.\n Приятного Вам освещения!"}},function(){return{figure:"circle",target:"section-menu .menu__item[data-item='email']",position:"left",title:"Отправить расчет",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}},function(){return{figure:"circle",target:"section-menu .menu__item[data-item='order']",position:"left",title:"Отправить предзаказ",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}},function(){return{figure:"circle",target:"section-menu .menu__item[data-item='payment']",position:"left",title:"Оплатить заказ",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}},function(){return{figure:"circle",target:"section-menu .menu__item[data-item='callback']",position:"left",title:"Заказать звонок",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}}]}(app),function(t,e,n,o,i){t.define("router"),t.router={base:"#",start:!1,init:function(){window.route&&(riot.route=window.route),riot.route("/",function(){i.isEmpty(r.params.get())?r.mount({screen:"begin"}):r.mount({screen:"podbor"})}),riot.route("podbor",function(){r.mount({screen:"podbor"})}),riot.route("order",function(){r.mount({screen:"podbor",section:"order"})}),riot.route("sendmail",function(){r.mount({screen:"podbor",section:"sendmail"})}),riot.route("payment",function(){r.mount({screen:"podbor",section:"payment"})}),riot.route("gallery",function(){r.mount({screen:"podbor",section:"gallery"})}),riot.route.base(this.base),riot.route.start(!0)},params:{get:function(){return Url.parseQuery()},set:function(t){Url.updateSearchParam(t)}},nav:function(t){riot.route(t)},mount:function(e){r.start||(t.compatible?t.compatible.init(r.render,e):r.render(e))},render:function(e){var o=n.body.find("#loader"),a=riot.mount(".screens","screens"+(t.device.isPhone?"-mobile":""))[0];a.one("updated",function(){$afterlag.run(function(){n.body.removeClass("appLoading"),i.onEndTransition(o[0],function(){o.remove()})},{iterations:"podbor"==e.screen?7:2,timeout:"podbor"==e.screen?2e3:500}),$afterlag.run(function(){$Screens[e.screen].show({section:e.section})},{iterations:3,timeout:1e3}),r.start=!0})}};var r=t.router;$Router=t.router}(app,$$,app.$dom,app.events,app.utils),function(t,e,n){t.define("control");var o=null;t.control.init=function(e){if(e){o=e,t.device.isPhone?$Control=o.tags["section-control-mobile"]:$Control=o.tags["section-control"],$Control.wrapper=$Control.tags["control-wrapper"],$Control.light=$Control.wrapper.tags["control-light"],$Control.humidity=$Control.wrapper.tags["control-humidity"],$Control.color=$Control.wrapper.tags["control-color"],$Control.length=$Control.wrapper.tags["control-length"],$Control.refresh={humidity:function(){$Options.set("hum",$Cursor.ledribbon.get("product","hum"))},color:function(){$Options.set("color",$Cursor.ledribbon.get("product","color"))}},$Product={ledribbon:o.ledribbon._tag,power:o.power._tag,control:o.control._tag},$Cursor={ledribbon:$store.data.getProductCursor("ledribbon"),power:$store.data.getProductCursor("power"),control:$store.data.getProductCursor("control")},t.control.tag=e;var e=n.extend(e,t.control);return t.control.listen(),e}},t.control.render=function(){var t=$State.get("group"),e={active:!0,light:$Options.get("light"),length:$Options.get("length")},i=!!$Options.get("package")&&$store.packages.getItemById($Options.get("package"),e);i?($State.select("group").set(i.group),o.set.productsAll(e),o.set.products({ledribbon:i.ledribbon,power:i.power,control:i.control})):(o.set.productsAll(e),e.group=t,i=n.sortArray($store.packages.getItemsByParams(e),"pos")[0],i?($State.select("group").set(i.group),$Options.select("package").set(i._id),o.set.products(i)):(t="norm",$Options.select("package").set(),o.set.products({ledribbon:$Cursor.ledribbon.get("products",{group:t}),power:$Cursor.power.get("products",{group:t}),control:$Cursor.control.get("products",{group:t})}))),$store.humidity.setStore(),$Control.refresh.humidity(),$store.color.setStore(),$Control.refresh.color(),o.set.totalPrice(),o.update()},t.control.set={params:function(){$Router.params.set($Options.get())},products:function(t){t&&$store.data.setProducts({ledribbon:t.ledribbon&&t.ledribbon.article?t.ledribbon.article:t.ledribbon,power:t.power&&t.power.article?t.power.article:t.power,control:t.control&&t.control.article?t.control.article:t.control})},productsAll:function(t){t&&$store.data.setProductsAll({ledribbon:n.sortArray($store.products.getItemsByParamsWithoutGroup(n.extend(t,{type:"ledribbon"})),"pos"),power:n.sortArray($store.products.getItemsByParamsWithoutGroup(n.extend(t,{type:"power"})),"pos"),control:n.sortArray($store.products.getItemsByParamsWithoutGroup(n.extend(t,{type:"control"})),"pos")})},totalPrice:function(){if(t.device.isPhone)o.sections.resultCount.update();else{var e=0,n={ledribbon:$Cursor.ledribbon.get("product","price"),power:$Cursor.power.get("product","price"),control:$Options.get("controlled")?$Cursor.control.get("product","price"):null};e+=n.ledribbon?n.ledribbon*$Options.get("length"):0,e+=n.power?n.power:0,e+=n.control?n.control:0,o.sections.totalPrice.refresh(e),$Menu.totalPrice.refresh(e)}}},t.control.listen=function(){o.on("mode",function(t,e){o.root.setAttribute("data-"+t,e)});var t=n.debounce(o.set.params,300),e=n.debounce(o.render,300);$Options.on("write",function(n){var i=n.data.path[0];"controlled"==i?$Product.control.update():"light"==i||"length"==i?e():"hum"==i?$Control.humidity.update():"color"==i&&$Control.color.update(),o.active&&(t(),"length"!=i&&o.set.totalPrice())}),n.bbUpdate($store.data,function(t,e,n){o.active&&(e&&("ledribbon"==e.type?$Product.ledribbon.update():"power"==e.type?$Product.power.update():"control"==e.type&&$Product.control.update()),o.set.totalPrice())})}}(app,app.$dom,app.utils),function(t,e,n,o,i){t.define("plugins.styles"),t.plugins.styles={ready:!1,init:function(n){if(!r.ready){this.el=e(n.elem),this.screen=n.default,this.screens=n.screens,this.callback=n.callback,r.resizer(t.$dom.window[0].innerWidth);var o=i.debounce(r.resizer,100);t.$dom.window.on("resize.styles",function(){var t=o(this.innerWidth);t&&t.length&&r.callback&&r.callback(r.screen)}),r.ready=!0}},resizer:function(t){return i.filter(r.screens,function(e){if((e.minWidth&&e.maxWidth&&t>e.minWidth-1&&t<e.maxWidth+1||e.minWidth&&!e.maxWidth&&t>e.minWidth||e.maxWidth&&!e.minWidth&&t<e.maxWidth)&&r.screen!==e.title)return e.reload&&r.ready&&r.screen!=e.title?window.location.reload():e.path&&r.el.attr("href",e.path),r.screen=e.title,console.log("resize: "+e.title),r.screen})}};var r=t.plugins.styles}(app,$,app.$dom,app.events,app.utils),function(t,e,n,o,i){t.define("plugins.share"),t.plugins.share=function(t,n){t&&n&&(this.scope=e(t),this.options=n,this.init())},t.plugins.share.prototype={init:function(){var t=this,e=this.options;this.active||(this.scope.on("click",e.buttons,function(n){var o=n.currentTarget,i=e.dataAttr?"data-"+e.dataAttr:"data-social",r=o.getAttribute(i);if(r){var a=e.share&&e.share.title||document.title,s=e.url||window.location.href;"fb"==r?t.fb(s,a):"vk"==r?t.vk(s,a):"gl"==r?t.gl(s,a):"dk"==r?t.dk(s,a):"tw"==r&&t.tw(s,a)}}),this.active=!0)},vk:function(t,e,n,o){url="http://vkontakte.ru/share.php?",url+="url="+encodeURIComponent(t),url+="&title="+encodeURIComponent(e),n&&(url+="&image="+encodeURIComponent(n)),o&&(url+="&description="+encodeURIComponent(o)),url+="&noparse=true",this.popup(url)},dk:function(t,e){url="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",url+="&st.comments="+encodeURIComponent(e),url+="&st._surl="+encodeURIComponent(t),this.popup(url)},fb:function(t,e,n,o){url="http://www.facebook.com/sharer.php?",url+="&p[title]="+encodeURIComponent(e),url+="&p[url]="+encodeURIComponent(t),n&&(url+="&p[images][0]="+encodeURIComponent(n)),o&&(url+="&p[summary]="+encodeURIComponent(o)),this.popup(url)},tw:function(t,e){url="http://twitter.com/share?",url+="text="+encodeURIComponent(e),url+="&url="+encodeURIComponent(t),url+="&counturl="+encodeURIComponent(t),this.popup(url)},ml:function(t,e,n,o){url="http://connect.mail.ru/share?",url+="url="+encodeURIComponent(t),url+="&title="+encodeURIComponent(e),n&&(url+="&imageurl="+encodeURIComponent(n)),o&&(url+="&description="+encodeURIComponent(o)),this.popup(url)},gl:function(t){url="https://plus.google.com/share?",url+="url="+encodeURIComponent(t),this.popup(url)},popup:function(t){window.open(t,"","width=600,height=400,left=350,top=170,status=no,toolbar=no,menubar=no")},destroy:function(){this.scope.off(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,n,o,i){t.define("plugins.animate"),t.plugins.animate=function(t,n){var o=this;this.groups=[],this.options=n,this.scope=e(t),this.scope.find("*").each(function(){var t=this.getAttribute("class");if(t&&t.match(/anim-group/)){var e=t.match(/anim-group(\d+)/)[1],n=t.match(/anim-delay-(\w+)/),r=i.findWhere(o.groups,{num:e}),a={elem:this,delay:n&&n.length&&n[1]?o.delay.getNumByTitle(n[1]):"0"};r?r.items.push(a):o.groups.push({num:e,items:[a]})}})},t.plugins.animate.prototype={show:function(t){var e=this;this.groups.length&&i.each(i.sortArray(this.groups,"num"),function(n,o){!function(){if(e.groups[o+1]){var r=null,a=null;e.options&&e.options.showAfter?(r=i.sortArray(n.items,"delay","asc"),a=r[e.options.showAfter-1].elem):(r=i.sortArray(n.items,"delay","desc"),a=r[0].elem),a&&i.onEndTransition(a,function(){e.scope.addClass("showAnim-group"+(1*n.num+1)),e.groups.length==1*n.num+1&&i.isFunction(t)&&t()})}}(n,o),0==o&&e.scope.addClass("showAnim-group"+n.num)})},hide:function(t){if(this.groups.length&&(this.scope.removeClass(i.map(i.pluck(this.groups,"num"),function(t){return"showAnim-group"+t}).join(" ")),i.isFunction(t))){var e=i.sortArray(this.groups[0].items,"delay","desc")[0].elem;i.onEndTransition(e,function(){t()})}},delay:{items:[{title:"xs",num:"1"},{title:"s",num:"2"},{title:"m",num:"3"},{title:"l",num:"4"},{title:"xl",num:"5"}],getNumByTitle:function(t){return i.findWhere(this.items,{title:t}).num}}}}(app,$,app.$dom,app.events,app.utils),app.plugins.marquee=function(t,e){var n=t.find(e.screens),o=$('<div class="'+e.spaceClass+'" />').prependTo(t),i=[],r=app.effects[e.effect],a=(t.data("name"),{index:0,prevIndex:0,progress:0,size:0,scrolling:!1,enabled:!0,section:null,_events:{},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;e<n;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}}});n.each(function(t){var n=$(this),r=n.api("screen");r.state={isVisible:!1,isEndShow:!1,isStartShow:!1,isFullShow:!1,isFullHide:!0};var a={index:t,block:n,fake:$('<div class="'+e.spaceClass+'__screen" />'),api:r,ratio:1,enable:!0};i.push(a),o.append(a.fake)});var s=function(){var t=0;a.size=e.vertical?app.sizes.height:app.sizes.width,$.each(i,function(n,o){if(e.vertical){var i=Math.max(o.block.outerHeight(),o.block.find(e.contentClass?"."+e.contentClass:".screen__frame").outerHeight());i>a.size?(o.block.addClass(e.longClass?e.longClass:"screen__long"),o.size=i):(o.block.removeClass(e.longClass?e.longClass:"screen__long"),o.size=app.sizes.height),o.fake.width(app.sizes.width),o.fake.height(o.size),n>0&&e.hideSections&&o.block.css("display","none")}else o.size=app.sizes.width,o.fake.width(o.size),o.fake.height(app.sizes.height);o.offset=t,o.ratio=o.size/a.size,t+=o.size})};s();var l=new IScroll(t[0],{marquee:!0,disableMouse:!1,mouseWheel:e.mousewheel,scrollX:!e.vertical,scrollY:e.vertical,bounce:!0,snap:"."+e.spaceClass+"__screen",eventPassthrough:!e.vertical||"horizontal",probeType:3,snapSpeed:e.duration,preventDefault:!0,scrollbars:!!e.vertical&&"custom",interactiveScrollbars:e.vertical&&!app.device.support.touch,fake:!0});a.setLimits=function(t){t=Math.min(Math.max(0,t),i.length-1);var n=t>=i.length-1,o=0==t;l[e.vertical?"minScrollY":"minScrollX"]=-i[t].offset+(o?0:i[t-1].size),l[e.vertical?"maxScrollY":"maxScrollX"]=-i[t].offset-(n?i[t].size-a.size:i[t].size),l.currentPage={x:0,y:0,pageX:0,pageY:0},l.currentPage[e.vertical?"y":"x"]=-i[t].offset,l.currentPage[e.vertical?"pageY":"pageX"]=t;
},a.update=function(){for(var t=-Math.round(l[e.vertical?"y":"x"]),n=0,o=0;o<i.length;o++)t>=i[o].offset&&(n=o);a.position=(t-i[n].offset)/i[n].size,a.progress=n+a.position,a.index!=n&&(a.prevIndex=a.index,a.index=n)},a.hideInvisibles=function(){for(var t=0;t<i.length;t++)t!=a.index&&t!=a.index+1&&(t>a.index+1&&r.show(i[t].block,0,a.size,i[t].ratio),t<a.index&&r.hide(i[t].block,1,a.size,i[t].ratio),e.hideSections&&(i[t].block[0].style.display="none"))},a.callScreensAPI=function(){var t=a.index>=i.length-1,n=1/i[a.index].ratio,o={top:0,bottom:0};if(o.top=a.position/n,o.bottom=a.position*i[a.index].ratio-(i[a.index].ratio-1),o.bottom>.6?(i[a.index].api.state.isVisible&&(i[a.index].api.state.isVisible=!1,i[a.index].block.triggerHandler("hide")),t||i[a.index+1].api.state.isVisible||(i[a.index+1].api.state.isVisible=!0,i[a.index+1].block.triggerHandler("show"))):o.top>.4&&(i[a.index]&&!i[a.index].api.state.isVisible&&(i[a.index].api.state.isVisible=!0,i[a.index].block.triggerHandler("show")),!t&&i[a.index+1].api.state.isVisible&&(i[a.index+1].api.state.isVisible=!1,i[a.index+1].block.triggerHandler("hide"))),t||(o.bottom>.1&&!i[a.index+1].api.state.isStartShow?(i[a.index+1].api.state.isStartShow=!0,i[a.index+1].block.triggerHandler("startShow")):o.bottom<.1&&i[a.index+1].api.state.isStartShow&&(i[a.index+1].api.state.isStartShow=!1),o.bottom>.9&&!i[a.index+1].api.state.isEndShow?(i[a.index+1].api.state.isEndShow=!0,i[a.index+1].block.triggerHandler("endShow")):o.bottom<.9&&i[a.index+1].api.state.isEndShow&&(i[a.index+1].api.state.isEndShow=!1)),i[a.index]&&o.bottom<.9&&!i[a.index].api.state.isEndShow?(i[a.index].api.state.isEndShow=!0,i[a.index].block.triggerHandler("endShow")):i[a.index]&&o.bottom>.9&&i[a.index].api.state.isEndShow&&(i[a.index].api.state.isEndShow=!1),i[a.index]&&o.bottom<.1&&!i[a.index].api.state.isStartShow?(i[a.index].api.state.isStartShow=!0,i[a.index].block.triggerHandler("startShow")):i[a.index]&&o.bottom>.1&&i[a.index].api.state.isStartShow&&(i[a.index].api.state.isStartShow=!1),i[a.index]&&o.top>=0&&o.bottom<=0){i[a.index].api.state.isFullShow||(i[a.index].api.state.isFullShow=!0,i[a.index].block.triggerHandler("fullShow"));for(var r=0;r<i.length;r++)r!=a.index&&(i[r].api.state.isFullShow=!1)}else for(var r=0;r<i.length;r++)i[r].api.state.isFullShow=!1;for(var s=[Math.floor(a.progress),Math.ceil(a.progress)],r=0;r<i.length;r++)r==s[0]||r==s[1]?(i[r].api.state.isFullHide=!1,e.hideSections&&(i[r].block[0].style.display="block"),a.section=i[r].block[0].getAttribute("data-"+(e.dataAttr?e.dataAttr:"marquee")),e.activeClass&&i[r].block.addClass(e.activeClass)):i[r].api.state.isFullHide||(e.hideSections&&(i[r].block[0].style.display="none"),i[r].block.triggerHandler("fullHide"),i[r].api.state.isFullHide=!0,e.activeClass&&i[r].block.removeClass(e.activeClass))},a.markNav=function(){e.navPrev&&e.navPrev[a.progress<=.5?"addClass":"removeClass"]("i-disabled"),e.navNext&&e.navNext[a.progress>=i.length-1.5?"addClass":"removeClass"]("i-disabled")},a.draw=function(){if(!r.move||i[a.index].ratio*a.position>=i[a.index].ratio-1){var t=1-Math.abs(i[a.index].ratio*a.position-i[a.index].ratio);a.index>=0&&r.hide(i[a.index].block,t,a.size,i[a.index].ratio),a.index<i.length-1&&r.show(i[a.index+1].block,t,a.size,i[a.index+1].ratio),0!==t&&1!==t||a._execEvent("change")}else a.index>=0&&r.move(i[a.index].block,i[a.index].ratio*a.position,a.size,i[a.index].ratio),a.index<i.length-1&&r.show(i[a.index+1].block,0,a.size,i[a.index+1].ratio);a.hideInvisibles(),a.markNav()},a.onScrollStart=function(){a.scrolling=!0},a.onScroll=function(){if(index=0,a.update(),a.draw(),a.callScreensAPI(),l.moved){for(var t=l[e.vertical?"y":"x"]-l[e.vertical?"pointY":"pointX"],n=0;n<i.length;n++)t<=-i[n].offset&&t>=-i[n].offset-i[n].size&&(index=n);a.setLimits(index)}else if(l.indicators&&l.indicators[0].moved){for(var n=0;n<i.length;n++)l[e.vertical?"y":"x"]-a.size/2<=-i[n].offset&&l[e.vertical?"y":"x"]+a.size/2>=-i[n].offset-i[n].size&&(index=n);a.setLimits(index)}},a.grabTimer=!1;var c=function(){clearTimeout(a.grabTimer),a.scrolling||(a.scrolling=!0)},d=function(){a&&clearTimeout(a.grabTimer),a&&a.scrolling&&(a.scrolling=!1)};if(l.on("beforeWheelSnap",function(){index=0;for(var t=0;t<i.length;t++)l[e.vertical?"y":"x"]-a.size/2<=-i[t].offset&&l[e.vertical?"y":"x"]+a.size/2>=-i[t].offset-i[t].size&&(index=t);l.absStartX=e.vertical?0:-i[index].offset,l.absStartY=-e.vertical?-i[index].offset:0,a.setLimits(index)}),a.onScrollEnd=function(){a.refresh()},a.refresh=function(){a.update(),a.draw(),a.callScreensAPI(),a.setLimits(a.index)},a.resize=function(){if(!a)return!1;s();var t=l.y;l.refresh(),t!==l.y&&l.scrollBy(0,t-l.y,0),a.refresh()},a.enable=function(){a.enabled=!0,l.enable(),a.enableKeyboard()},a.disable=function(){a.enabled=!1,l.disable(),a.disableKeyboard()},l.on("scrollStart",function(){return!!a&&void a.onScrollStart()}),l.on("scroll",function(){return!!a&&(a.onScroll(),void(l.moved&&c()))}),l.on("scrollEnd",function(){return!!a&&(a.onScrollEnd(),void d())}),l.on("grab",function(){if(!a)return!1;c(),a.grabTimer=setTimeout(function(){l&&l.reset(),d()},500);for(var t=0,n=l[e.vertical?"y":"x"]-l[e.vertical?"pointY":"pointX"],o=0;o<i.length;o++)n<=-i[o].offset&&n>=-i[o].offset-i[o].size&&(t=o);a.setLimits(t)}),app.$dom.window.on("resize",a.resize),a.setLimits(0),a.scrollTo=function(t,n){n=void 0===n&&0!==n?550:n,e.hideSections&&(i[t].block[0].style.display="block"),setTimeout(function(){l.goToPage(e.vertical?0:t,e.vertical?t:0,n,IScroll.utils.ease.cubicOut),0==n&&a.refresh()},5)},a.prev=function(t){if(a.scrolling)return!1;t=void 0===t?e.duration:t;var n=-l.y-i[a.index].offset;e.vertical&&n?l.scrollBy(0,Math.min(n,a.size),t,IScroll.utils.ease.cubicOut):e.vertical&&l.y<=-a.size?l.scrollBy(0,a.size,t,IScroll.utils.ease.cubicOut):a.index>0&&l.prev(t,IScroll.utils.ease.cubicOut)},a.next=function(t){if(a.scrolling)return!1;t=void 0===t?e.duration:t;var n=i[a.index].offset+i[a.index].size-(-l.y+a.size);n>.1*a.size&&e.vertical?l.scrollBy(0,-Math.min(n,a.size),t,IScroll.utils.ease.cubicOut):a.index<i.length-1&&l.next(t,IScroll.utils.ease.cubicOut)},a.get=function(t){return a[t]},a.hideScreen=function(t,e){f[t].enable&&(f[t].enable=!1,a.callScreensVisible(),e&&a.resize())},a.showScreen=function(t,e){f[t].enable||(f[t].enable=!0,a.callScreensVisible(),e&&a.resize())},a.callScreensVisible=function(){for(var t=[],e=0;e<f.length;e++)f[e].enable&&t.push(f[e]);t.length!==i.length&&(i=t)},a.destroy=function(){t.find("."+e.spaceClass).remove(),t.removeData("marquee"),l.destroy(),l=null,a=null},e.vertical){var u=t.find(".iScrollVerticalScrollbar");u.addClass("ui-scroll").prepend('<div class="ui-scroll__bar" />'),u.find(".iScrollIndicator").addClass("ui-scroll__handle").prepend('<div class="ui-scroll__handle__inner" />')}e.navPrev&&e.navPrev.on("click",function(){a.prev(app.device.isPhone?500:700)}),e.navNext&&e.navNext.on("click",function(){a.next(app.device.isPhone?500:700)});var p="keydown.marquee-"+String(Math.round((new Date).getTime()/1e3))+(e.vertical?"v":"h");if(a.enableKeyboard=function(){app.device.support.touch||app.$dom.document.on(p,function(t){$(t.target).is("input,textarea,select")||(t.which==(e.vertical?38:37)&&a.prev(app.device.isPhone?500:700),t.which==(e.vertical?40:39)&&a.next(app.device.isPhone?500:700))})},a.disableKeyboard=function(){app.device.support.touch||app.$dom.document.off(p)},a.scroll=l,e.controlInvisible)for(var f=[],h=0;h<i.length;h++)f.push(i[h]);return t.data("marquee",{screens:i,onScrollStart:$.noop,onScrollEnd:$.noop,scrollTo:a.scrollTo,get:a.get,scroll:l,update:a.onScroll,resize:a.resize,enable:a.enable,disable:a.disable,destroy:a.destroy,enableKeyboard:a.enableKeyboard,disableKeyboard:a.disableKeyboard}),a},function(t,e,n,o,i){t.define("plugins.screens"),t.plugins.screens=function(t,n){this.active=!1,this.scope=e(t),this.options=n||{},this.state=null,this.items=[]},t.plugins.screens.prototype={init:function(e){var n=this;if(!this.active){this.scope.on("touchmove MSPointerMove",function(t){t.preventDefault()}),this.scope.on("dragstart selectstart",function(){return!1});var o={vertical:!0,screens:".screen",effect:this.options.vertical===!1?"space":"light",mousewheel:this.options.vertical!==!1,spaceClass:this.options.vertical===!1?"horizontal__space":"vertical__space",longClass:this.options.vertical!==!1&&"screen--long",contentClass:this.options.vertical!==!1&&"screen__content",hideSections:!0,navPrev:this.options.navPrev,navNext:this.options.navNext,duration:this.options.vertical===!1?t.device.isPhone?375:450:500};this.options&&i.extend(o,this.options);var r=100;this.scope.find(o.screens).each(function(t){n.items[this.getAttribute("data-marquee")]=t,o.vertical||(this.style.zIndex=r),r--}),this.marquee=t.plugins.marquee(this.scope,o),this.marquee.enable(),this.marquee.scroll.on("scrollEnd",function(){n.state=n.marquee.section}),e&&this.nav(e,0),this.active=!0}},nav:function(t,e){if(t){var n=this.items[t];void 0!==n&&(this.state=t,this.marquee.scrollTo(n,void 0!==e?e:void 0))}},get:function(t){return this.marquee[t]},refresh:function(){this.marquee.resize()},destroy:function(){this.scope.off(),this.marquee.scroll.off(),this.marquee.destroy(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),$store.products=_.extend(new Baobab([]),{getItemsByParams:function(t,e){return _.filter(e?e:$store.products.get(),function(e){return e.light==t.light&&e.type==t.type&&e.length==String(t.length)&&e.group==t.group})},getItemsByParamsWithoutGroup:function(t,e){return _.filter(e?e:$store.products.get(),function(e){return e.light==t.light&&e.type==t.type&&e.length==String(t.length)})},existItemsByParamsWithoutGroup:function(t,e){return!_.isEmpty(_.findWhere($store.products.getItemsByParamsWithoutGroup(t),{article:e}))},getItemsByParamsWithoutType:function(t,e){return _.filter(e?e:$store.products.get(),function(e){return e.light==t.light&&e.length==String(t.length)&&e.group==t.group})},getItemByArticle:function(t){return $store.products.select({article:t}).get()},getImageByArticle:function(t){return t?"http://ledtop-shop.ru/files/catalog/"+t+".jpg":null}}),$store.packages=_.extend(new Baobab([]),{getItemsByParams:function(t,e){return _.filter(e?e:$store.packages.get(),function(e){return e.light==t.light&&e.length==String(t.length)&&e.group==t.group&&(!_.isBoolean(t.active)||t.active===e.active)})},getItemById:function(t,e){var n={_id:t};return e&&_.extend(n,e),$store.packages.select(n).get()},getTitleById:function(t){return $store.packages.select({_id:t}).get("title")},getPrice:function(t,e){var n=$store.packages.get({_id:t}),o=0,i={ledribbon:$store.products.getItemByArticle(n.ledribbon),power:$store.products.getItemByArticle(n.power),control:$store.products.getItemByArticle(n.control)};return o+=i.ledribbon?i.ledribbon.price*e:0,o+=i.power?i.power.price:0,o+=i.control?i.control.price:0}}),$store.light=_.extend(new Baobab([{_id:"1",title:"Монохромная"},{_id:"2",title:"Мультицветная"},{_id:"3",title:"Бегущий огонь"}]),{getTitleById:function(t){return _.findWhere($store.light.get(),{_id:t}).title}}),$store.power=_.extend(new Baobab([{_id:"1",title:"Стандарт"},{_id:"2",title:"Яркая"},{_id:"3",title:"Супер яркая"}]),{getTitleById:function(t){return _.findWhere($store.power.get(),{_id:t}).title}}),$store.type=_.extend(new Baobab([{_id:"ledribbon",title:"Лента"},{_id:"power",title:"Питание"},{_id:"control",title:"Управление"}]),{getTitleById:function(t){return _.findWhere($store.type.get(),{_id:t}).title}}),$store.group=_.extend(new Baobab([{_id:"econom",title:"Эконом"},{_id:"norm",title:"Норма"},{_id:"lux",title:"LUX"}]),{getTitleById:function(t){return _.findWhere($store.group.get(),{_id:t}).title}}),$store.data=_.extend(new Baobab([{_id:"ledribbon",title:"Лента",product:null,products:null},{_id:"power",title:"Блок питания",product:null,products:null},{_id:"control",title:"Управление",product:null,products:null}],{autoCommit:!0}),{setProduct:function(t){$store.data.select({_id:t.type},"product").set(t)},setProducts:function(t){_.each(t,function(t,e){$store.data.select({_id:e},"product").set($store.products.getItemByArticle(t))})},setProductsAll:function(t){_.each(t,function(t,e){$store.data.select({_id:e},"products").set(t)})},getProductCursor:function(t){return $store.data.select({_id:t})},getProduct:function(t){return $store.data.get({_id:t},"product")},getProducts:function(t){return $store.data.get({_id:t},"products")},getProductsByGroup:function(t,e){return _.where($store.data.get({_id:t},"products"),{group:e})},getProductsCount:function(t){var e=$store.data.get({_id:t},"products");return e?e.length:0},getProductsCountAll:function(){return _.reduce($store.data.get(),function(t,e){return t+e.products.length},0)}}),$store.humidity=_.extend(new Baobab([]),{setStore:function(){var t=[];_.each($store.data.getProducts("ledribbon"),function(e){e.hum&&!_.findWhere(t,{hum:e.hum})&&t.push({article:e.article,hum:e.hum})}),$store.humidity.set(t)}}),$store.color=_.extend(new Baobab([]),{mergeItems:function(t){var e=[];return related=_.compact(_.flatten(_.pluck(t,"related"))),_.each(related,function(t){_.findWhere(e,{color:t.color})||e.push(t)}),_.each($store.data.getProducts("ledribbon"),function(t){_.findWhere(e,{color:t.color})||e.push({article:t.article,color:t.color})}),e},setStore:function(){$store.color.set($store.color.mergeItems($store.data.getProducts("ledribbon")))}}),$store.order=_.extend(new Baobab([]),{getData:function(){}});