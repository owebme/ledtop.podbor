riot.tag2("root-main",'<div class="screens"></div> <section-tutorial></section-tutorial> <section-notify></section-notify>',"","",function(t){$$=window.jQuery||window.Zepto,$root=this,$rootScope=$$(this.root),app.ver="1.0";var o={pack:"norm",tooltipScreen:!1,showProducts:!1,tutorial:!0,offers:{manager:!1}},e={control:!0,light:"rgb",color:"green",humidity:"P67",length:"25"};$Router.params.get()&&(_.extend(e,$Router.params.get()),e.control="false"!==e.control);var i=Store.get("appVer");i&&i==app.ver?Store.get("config")&&(_.extend(o,Store.get("config")),o.showProducts=!1):(Store.clear(),Store.set("appVer",app.ver)),$Config=new Baobab(o,{autoCommit:!0}),$State=new Baobab(e,{autoCommit:!0}),$Config.on("update",function(t){Store.set("config",$Config)}),app.config.changeStyles&&app.plugins.styles.init({elem:"#styles",default:"normal",screens:[{title:"normal",maxWidth:1400,path:"/assets/css/style.css"},{title:"large",minWidth:1400,path:"/assets/css/style.largeScreen.css"}]}),this.on("mount",function(){$Tutorial=$root.tags["section-tutorial"],$Notify=$root.tags["section-notify"],app.router.init()})}),riot.tag2("section-alert",'<div class="alert__wrapper"> <div class="alert__header"> <h3 class="alert__title">{data.title}</h3> <p if="{data.subtitle}" class="alert__subtitle">{data.subtitle}</p> </div> <div class="alert__buttons"> <div onclick="{onCancel}" class="alert__button {alert__button--active : data.button === ⁗cancel⁗}">{data.cancel && data.cancel.title ? data.cancel.title : ⁗Отмена⁗}</div> <div onclick="{onSuccess}" class="alert__button {alert__button--active : data.button === ⁗success⁗}">{data.success && data.success.title ? data.success.title : ⁗OK⁗}</div> </div> </div>',"",'class="alert" data-open="{active}"',function(t){var o=this;$$(o.root);o.active=!1,o.data={title:null,subtitle:null},o.show=function(t){t&&(o.data=t,o.active=!0,o.update())},o.onSuccess=function(){o.data.success&&"function"==typeof o.data.success.callback&&o.data.success.callback(),o.data.button="success",o.active=!1},o.onCancel=function(){o.data.cancel&&"function"==typeof o.data.cancel.callback&&o.data.cancel.callback(),o.data.button="cancel",o.active=!1}}),riot.tag2("section-loader",'<div class="loader-spinner"></div>',"",'class="loader" data-show="{active}"',function(t){var o=this;o.active=!1,o.show=function(){return o.update({active:!0}),new Promise(function(t,e){_.onEndTransition(o.root,function(){return t()})})},o.hide=function(){o.update({active:!1})}}),riot.tag2("section-notify",'<div onclick="{hide}" name="notify" class="notify {opts.size ? \'notify-\' + opts.size : \'notify-m\'}" data-color="{opts.color ? opts.color : ⁗primary⁗}" riot-style="max-width:{opts.maxWidth ? opts.maxWidth : \'400px\'} {opts.width ? \'width:\' + opts.width : null}">{opts.text}</div>',"",'class="notify-wrapper" data-active="{active}" data-pos="{opts.pos ? opts.pos : ⁗top-left⁗}"',function(t){var o=this;o.active=!1,o.timeout=3,o.interval=null,o.opts={pos:"top-left"},o.on("mount",function(){setTimeout(function(){o.root.style.display="block"},20)}),o.show=function(t){return clearTimeout(o.interval),o.active&&o.autoHide(t),t.pos!=o.opts.pos?(o.update({opts:t}),setTimeout(function(){o.update({active:!0})},200)):o.update({opts:t,active:!0}),new Promise(function(e,i){_.onEndTransition(o.notify,function(){return o.autoHide(t),e()})})},o.autoHide=function(t){t.timeout!==!1&&(o.interval=setTimeout(function(){o.hide()},t.timeout?1e3*t.timeout:1e3*o.timeout))},o.hide=function(){o.update({active:!1})}}),riot.tag2("oscreen-loader",'<div class="oScreen__loader__progress" riot-style="width:{status}%" data-anim="{animate}"></div> <div class="oScreen__loader__spinner"></div>',"",'class="oScreen__loader"',function(t){var o=this;o.active=!1,o.status=0,o.animate=!1,o.progress=null,o.show=function(t){t&&!o.active&&(o.active=!0,o.start=t.start||$$.noop,o.end=t.end||$$.noop,o.callback=t.callback||$$.noop,o.scope=$$(t.scope)[0],o.reset(),o.parent.update({loading:!0}),app.device.isMobile&&o.update({animate:!0}),o.start(),_.onEndTransition(o.scope,function(){t.resources?app.loader.resources(t.resources,o.onResourcesLoaded,function(){o.status+=25/t.resources.length,o.updateLoading()}):(o.status+=25,o.onResourcesLoaded(),o.updateLoading()),$afterlag.run(function(){_.isFunction(t.tag)?(o.html=t.tag(),o.html.one("updated",function(){$afterlag.run(function(){o.onHtmlLoaded(t.content)})})):o.onHtmlLoaded(t.content)})}))},o.init=function(){o.progress.resources&&o.progress.images&&o.progress.html&&(o.status=100,o.updateLoading(),setTimeout(o.hide,175))},o.onImagesLoaded=function(){o.progress.images=!0,o.init()},o.onImagesItemLoaded=function(t,e){o.status+=25/e,o.updateLoading()},o.onResourcesLoaded=function(){o.progress.resources=!0,o.animate=!0,o.init()},o.onHtmlLoaded=function(t){o.progress.html=!0,o.status+=50,o.animate=!1,o.updateLoading(),app.loader.images($$(t),o.onImagesLoaded,o.onImagesItemLoaded),o.init()},o.hide=function(){o.parent.update({loading:!1,active:!0}),o.end(),_.onEndTransition(o.scope,function(){o.callback()}),o.reset()},o.reset=function(){o.progress={resources:!1,images:!1,html:!1},o.update({status:0})},o.updateLoading=function(){o.update()}}),riot.tag2("share-button",'<div class="shareButton__opener"></div> <div class="shareButton__items"> <div class="shareButton__item" data-share="fb" data-balloon="Поделиться в Facebook" data-balloon-color="blue"> <icon-fb></icon-fb> </div> <div class="shareButton__item" data-share="vk" data-balloon="Поделиться в ВКонтакте" data-balloon-pos="left" data-balloon-color="blue"> <icon-vk></icon-vk> </div> <div class="shareButton__item" data-share="tw" data-balloon="Поделиться в Twitter" data-balloon-pos="left" data-balloon-color="blue"> <icon-tw></icon-tw> </div> <div class="shareButton__item" data-share="dk" data-balloon="Поделиться в Одноклассниках" data-balloon-pos="left" data-balloon-color="blue"> <icon-dk></icon-dk> </div> </div>',"",'class="shareButton" data-pos="{opts.pos}"',function(t){}),riot.tag2("section-tutorial",'<div class="tutorial__shape" name="shape" riot-style="{step.style}"></div> <div name="msgBox" class="tutorial__message__wrapper" riot-style="{message.style}"> <div name="msgElem" class="tutorial__message" data-position="{message.position}" data-active="false"> <p class="pos-tr p-m c-grayLight fontSize-m">Шаг {num} из {steps.get().length}</p> <h3 class="tutorial__message__title">{message.title}</h3> <p class="tutorial__message__text">{message.text}</p> <div class="fontSize-0"> <button onclick="{nextStep}" onupdate="none" class="btn btn-m {endShow ? \'btn-success\' : \'btn-default-hover-success\'} mr-xs"> <svg if="{endShow}" class="btn-svg btn-svg-repeat" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50"> <path class="fill-white" d="M 39.78125 5.96875 A 2.0002 2.0002 0 0 0 38 8 L 38 12.5625 C 34.722701 9.1373523 30.10346 7 25 7 C 15.082241 7 7 15.082241 7 25 A 2.0002 2.0002 0 1 0 11 25 C 11 17.243759 17.243759 11 25 11 C 28.816123 11 32.256876 12.535728 34.78125 15 L 31 15 A 2.0002 2.0002 0 1 0 31 19 L 40 19 L 42 19 L 42 17 L 42 8 A 2.0002 2.0002 0 0 0 39.96875 5.96875 A 2.0002 2.0002 0 0 0 39.78125 5.96875 z M 40.78125 22.96875 A 2.0002 2.0002 0 0 0 39 25 C 39 32.757363 32.756392 39 25 39 C 21.184399 39 17.742551 37.46305 15.21875 35 L 19 35 A 2.0002 2.0002 0 1 0 19 31 L 10 31 L 8 31 L 8 33 L 8 42 A 2.0002 2.0002 0 1 0 12 42 L 12 37.4375 C 15.276425 40.860887 19.895994 43 25 43 C 34.917608 43 43 34.918637 43 25 A 2.0002 2.0002 0 0 0 40.96875 22.96875 A 2.0002 2.0002 0 0 0 40.78125 22.96875 z"></path> </svg> {endShow ? \'Повторить\' : \'Далее\'} </button> <button onclick="{hide}" class="btn btn-m btn-primary-hover">{endShow ? \'Перейти к выбору\' : \'Выйти из обзора\'}</button> </div> </div> </div>',"",'class="tutorial" data-open="{active}" active-zone="{step.activeZone}"',function(t){var o=this;o.active=!1,o.steps=new Baobab([]).root,o.borderColor="#0084ff",o.on("before-mount",function(){o.reset()}),o.on("messageShow",function(){o.message.active||(o.message.active=!0,_.onEndTransition(o.shape,function(){o.cordsMsg(),o.update(),o.msgElem.setAttribute("data-active",!0)}))}),o.on("messageHide",function(){o.message.active=!1,o.msgElem.setAttribute("data-active",!1),_.onEndTransition(o.msgElem,function(){o.message.position=o.step.position,o.message.title=o.step.title,o.message.text=o.step.text,o.update()})}),o.reset=function(){o.start=!1,o.scope=null,o.message={active:!1,style:"clear:both",position:null,title:null,text:null},o.cursor=null,o.target=null,o.num=0,o.step={activeZone:!1,style:"clear:both"},o.endShow=!1},o.show=function(t,e){if(app.plugins.tutorial[e]){o.start=!0,o.steps.set(app.plugins.tutorial[e]),o.scope=$$(t),o.active=!0,o.trigger("messageHide"),o.nextStep();var i=_.debounce(o.render,100);app.$dom.window.on("resize.tutorial",function(){i()})}else console.log("Not found tutorial: "+e)},o.nextStep=function(){o.cursor?o.trigger("messageHide"):o.trigger("messageShow"),o.endShow&&o.step.actions&&o.step.actions.toggle&&o.step.actions.toggle(o.target),o.cursor&&o.cursor.right()?(o.actions(o.step,o.target,!0),o.cursor=o.cursor.right()):o.cursor=o.steps.down(),o.step=o.cursor.get().call(),o.target=o.scope.find(o.step.target),o.start&&(o.message.position=o.step.position,o.message.title=o.step.title,o.message.text=o.step.text),o.render(),o.afterlag(function(){o.trigger("messageShow"),o.cursor.right()?o.endShow=!1:o.endShow=!0,o.update(),o.endShow?o.num=1:o.num++,o.actions(o.step,o.target),o.start=!1})},o.render=function(){o.offset=o.target.offset(),o.step.offset&&(o.offset.top+=o.step.offset.top?o.step.offset.top:0,o.offset.left+=o.step.offset.left?o.step.offset.left:0);var t=o.target.data("width")||o.step.width,e=o.target.data("height")||o.step.height,i=o.target.data("zoom")||o.step.zoom,a=o.target.data("padding")||o.step.padding,n=t?parseInt(t):a?o.target.outerWidth()+2*parseInt(a):o.target.outerWidth(),s=e?parseInt(e):a?o.target.outerHeight()+2*parseInt(a):o.target.outerHeight(),c=i?parseFloat(i):1,l=300,r=l/2,d=(a?o.offset.left-parseInt(a):o.offset.left)+n/2,p=(a?o.offset.top-parseInt(a):o.offset.top)+s/2,u=d-r,v=p-r,m=n/l*c,_=s/n*l*c,g=Math.ceil(5/m),f=5*g,h=1e4+20/m,b=1.008*h,x=null;if("square"==o.step.figure)v=p-_/2,x="-webkit-transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+m+"); transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+m+"); width: "+l+"px; height: "+_+"px; box-shadow: inset 0 0 0 "+g+"px "+o.borderColor+", inset 0 0 "+f+"px rgba(0,0,0,0.4); border-radius: "+h+"px";else if("circle"==o.step.figure){var w=Math.sqrt(2)*Math.max(n,s)/2,$=2*w,k=$/l*c,g=Math.ceil(5/k),f=5*g;x="-webkit-transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+k+"); transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+k+"); width: "+l+"px; height: "+l+"px; box-shadow: inset 0 0 0 "+g+"px "+o.borderColor+", inset 0 0 "+f+"px rgba(0,0,0,0.4); border-radius: "+b+"px"}o.step.style=x,o.targetWidth=n,o.targetHeight=s},o.cordsMsg=function(){var t=o.offset.top;t+o.msgBox.scrollHeight>app.sizes.height-40&&(t=o.offset.top+(app.sizes.height-40)-(t+o.msgBox.scrollHeight)),t<40&&(t=40),"right"==o.step.position?o.message.style="top:"+t+"px; left:"+(o.offset.left+o.targetWidth)+"px":"left"==o.step.position||"up"==o.step.position?o.message.style="top:"+t+"px; left:"+o.offset.left+"px":"down"==o.step.position&&(o.message.style="top:"+(o.offset.top+o.targetHeight)+"px; left:"+o.offset.left+"px")},o.actions=function(t,e,i){t.actions&&t.actions.toggle&&o.afterlag(function(){t.actions.toggle(e)},{delay:i?0:650,iterations:i?0:5})},o.hide=function(){o.active=!1,_.onEndTransition(o.root,function(){o.reset(),o.update()}),o.afterlag(function(){o.actions(o.step,o.target,!0)}),app.$dom.window.off("resize.tutorial")},o.afterlag=function(t,o){var e={delay:0,iterations:1};o&&_.extend(e,o);var i=new Afterlag(e);i.run(t)}}),riot.tag2("screen-begin",'<div class="container pos-centered"> <div name="text1" class="row anim-text anim-text-bt {anim-textIn : animate.text1.in, anim-textOut : animate.text1.out}" delay-hide="s"> <div class="col-md-20 centered"> <div class="fontSize-52 fontWeight-3 text-center">Мы вам поможем подобрать готовый комплект для вашей подсветки.</div> </div> </div> </div> <div class="container pos-centered h60"> <div name="text2" class="row anim-text anim-text-bt {anim-textIn : animate.text2.in, anim-textOut : animate.text2.out}" delay-hide="m"> <div class="col-md-20 centered"> <div class="fontSize-44 fontWeight-3 text-center">Уделите несколько минут внимания, и выбранный комплект будет радовать вас долгие годы.</div> </div> </div> </div>',"",'class="section"',function(t){var o=this;$$(this.root);o.animate={text1:{in:!1,out:!1},text2:{in:!1,out:!1}},o.show=function(){$afterlag.run(function(){o.animate.text1.in=!0,o.update(),_.onEndAnimation(o.text1,function(){o.animate.text1.in=!1,o.animate.text1.out=!0,o.update(),_.onEndAnimation(o.text1,function(){o.animate.text1.out=!1,o.animate.text2.in=!0,o.update(),_.onEndAnimation(o.text2,function(){o.animate.text2.in=!1,o.animate.text2.out=!0,o.update(),_.onEndAnimation(o.text2,function(){o.animate.text2.out=!1,o.update(),$Screens.step1.show()})})})})},{iterations:5})}}),riot.tag2("screens","<screen-begin></screen-begin> <screen-step1></screen-step1> <screen-step2></screen-step2> <screen-podbor></screen-podbor>","",'class="screens section"',function(t){var o=this;o.on("before-mount",function(){$Screens={begin:o.tags["screen-begin"],step1:o.tags["screen-step1"],step2:o.tags["screen-step2"],podbor:o.tags["screen-podbor"]},$Screen=$Screens.podbor})}),riot.tag2("screen-step1",'<div class="container pos-centered h95v"> <div name="tooltip" class="tooltip anim-group1 anim-tb" delay-show="xl" data-duration="xl"> Выберите тип подстветки </div> <div class="row"> <div onclick="{select}" data-light="mono" onupdate="none" class="col-md-8 cell anim-group1 anim-bt" data-duration="xl"> <div class="column" data-column="1"> <div class="column__content"> <div class="column__content__text">Монохромная подстветка</div> </div> <div class="column__tooltip" data-tooltip="1"> <div class="column__tooltip__icon" data-icon="mono"></div> <span class="column__tooltip__title">Монохромная подстветка</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> <div onclick="{select}" data-light="rgb" onupdate="none" class="col-md-8 cell anim-group1 anim-scale-soft" delay-show="xs"> <div class="column" data-column="2"> <div class="column__content"> <div class="column__content__text">Мультицветная</div> </div> <div class="column__tooltip" data-tooltip="2"> <div class="column__tooltip__icon" data-icon="rgb"></div> <span class="column__tooltip__title">Мультицветная</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> <div onclick="{select}" data-light="lightrun" onupdate="none" class="col-md-8 cell anim-group1 anim-bt" delay-show="xs" data-duration="xl"> <div class="column" data-column="3"> <div class="column__content"> <div class="column__content__text">Бегущий огонь</div> </div> <div class="column__tooltip" data-tooltip="3"> <div class="column__tooltip__icon" data-icon="fire"></div> <span class="column__tooltip__title">Бегущий огонь</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> </div> </div>',"",'class="section {showAnim-group1 : animate}" data-active="{active}"',function(t){var o=this;$$(this.root);o.active=!1,o.animate=!1,o.show=function(){$afterlag.run(function(){o.update({animate:!0})}),_.onEndTransition(o.tooltip,function(){o.update({active:!0})},{iterations:5})},o.select=function(t){o.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},o.hide=function(t){o.update({animate:!1,active:!1}),_.isFunction(t)&&_.onEndTransition(o.tooltip,function(){o.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("screen-step2",'<div class="section__overlay"></div> <div class="container pos-centered-h zIndex-10"> <div class="row"> <div class="col-md-10 centered main__tooltip">Выберайте близкий вам класс, в последующем его можно легко сменить или модифицировать.</div> </div> </div> <div class="arrow__left">Эконом</div> <div class="arrow__right">Люкс</div> <div class="container pos-centered header"> <div name="container" class="row anim-text anim-text-bt {anim-textIn : animate.in, anim-textOut : animate.out}"> <div class="col-md-24 centered"> <div class="title">Выбираем класс компонентов</div> </div> </div> </div> <div class="container pos-centered packs zIndex-10"> <div class="row packs__container"> <div class="col-md-8 pack pack-econom anim-group1 anim-bt" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="econom"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Эконом</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Эконом</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 28 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="led"> <div class="tooltip__icon"></div> <div class="tooltip__text">Светодиоды высокого качества</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> <div class="col-md-8 pack pack-norm anim-group1 anim-bt" delay-show="s" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="norm"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Норма</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Норма</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 31 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="ledribbon"> <div class="tooltip__icon"></div> <div class="tooltip__text">Лента класса LUX, супер надежная и качественная</div> </div> <div class="tooltip" data-tooltip="humidity"> <div class="tooltip__icon"></div> <div class="tooltip__text">Высокая степень влагозащищенности IP68</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> <div name="lastPack" class="col-md-8 pack pack-lux anim-group1 anim-bt" delay-show="l" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="lux"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Люкс</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Люкс</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 24 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="ledribbon"> <div class="tooltip__icon"></div> <div class="tooltip__text">Лента класса LUX, супер надежная и качественная</div> </div> <div class="tooltip" data-tooltip="led"> <div class="tooltip__icon"></div> <div class="tooltip__text">Светодиоды высокого качества</div> </div> <div class="tooltip" data-tooltip="humidity"> <div class="tooltip__icon"></div> <div class="tooltip__text">Высокая степень влагозащищенности IP68</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> </div> </div>',"",'class="section {showAnim-group1 : animate.pack}" data-active="{active}" data-overlay="false" data-tooltip="false" data-visible="false"',function(t){var o=this,e=$$(this.root);o.active=!1,o.animate={in:!1,out:!1,pack:!1},o.on("mount",function(){e.on("mouseenter mouseleave",".pack",function(t){"mouseenter"===t.type?o.root.setAttribute("data-overlay",!0):o.root.setAttribute("data-overlay",!1),t.currentTarget.getAttribute("class").match(/norm/)?o.root.setAttribute("data-tooltip",!0):o.root.setAttribute("data-tooltip",!1)})}),o.show=function(){o.root.setAttribute("data-visible",!0),$afterlag.run(function(){o.update({animate:{in:!0,out:!1,pack:!1}}),_.onEndAnimation(o.container,function(){o.update({animate:{in:!0,out:!1,pack:!0}}),_.onEndTransition(o.lastPack,function(){o.update({active:!0})})})},{iterations:5,timeout:500})},o.select=function(t){$afterlag.run(function(){o.hide(function(){$Router.nav("podbor"),$Screens.podbor.show(!0)})},{timeout:500}),$Config.set("pack",t.currentTarget.getAttribute("data-pack"))},o.hide=function(t){e.off(),o.root.setAttribute("data-overlay",!1),o.update({animate:{in:!1,out:!1,pack:!1}}),_.isFunction(t)&&_.onEndTransition(o.lastPack,function(){o.root.setAttribute("data-visible",!1),t()})}}),riot.tag2("ui-checkbox",'<label onclick="{onClick}" onupdate="{opts.onupdate ? opts.onupdate : ⁗self⁗}" class="checkbox {small : typeof opts.small !== \'undefined\'}" data-color="{opts.theme}"> <input type="checkbox" checked="{value}"> <span class="checkbox-control"></span> <span class="fontSize-{opts.size ? opts.size : \'m\'} {opts.color ? \'c-\' + opts.color : null}">{opts.title}</span> </label>',"","",function(t){var o=this,e=!1;o.on("before-mount",function(){if(o.opts.update&&o.opts.cursor)if(o.opts.group){var t=o.opts.cursor.get(o.opts.update);o.value=t==o.opts.value}else o.value=o.opts.cursor.get(o.opts.update);else void 0===o.opts.value?o.opts.value=o.value=!1:o.value=o.opts.value}),o.on("update",function(){e||(!o.opts.group&&!_.isBoolean(o.opts.value)&&o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):_.isBoolean(o.opts.value)&&o.opts.value!==o.value&&(o.value=o.opts.value))}),o.onClick=function(){e=!0,o.opts.group?o.value||(_.each(o.parent.tags,function(t,e){"ui-checkbox"==e&&_.each(t,function(t){t.opts.group==o.opts.group&&t.update({value:!1})})}),o.value=!o.value):o.value=!o.value,o.opts.commit===!0||"true"==o.opts.commit?o.parent.update():_.isFunction(o.opts.commit)?o.opts.commit.call(this,o.value,o.opts.i):o.opts.commit&&o.parent[o.opts.commit]&&o.parent[o.opts.commit](o.value,o.opts.i),o.opts.update&&o.opts.cursor&&(o.opts.group?o.opts.cursor.set(o.opts.update,o.opts.value):o.opts.cursor.set(o.opts.update,o.value)),setTimeout(function(){e=!1},5)}}),riot.tag2("ui-dropmenu",'<div if="{items && items.length}" class="dropmenu__wrapper"> <virtual each="{item in items}" no-reorder> <div if="{item && !item.divider}" onclick="{onSelect}" class="dropmenu__item"> {item.title ? item.title : item} </div> <div if="{item && item.divider}" class="dropmenu__item divider"></div> </virtual> </div>',"",'class="dropmenu" data-pos="{pos}" data-active="{active}"',function(t){var o=this,e=$$(o.root);o.active=!1,o.items=[],o.rootScroll=null,o.show=function(t){if(t&&t.elem){if(t.id||(t.id="0"),o._id&&o._id===t.id)return void o.hide();o.active&&o.hide(),t.id&&(o._id=t.id),o.pos=t.pos?t.pos:"center",o.items=t.menu,o.callback=t.callback,o.active=!0;var i=t.elem.offset(),a=0,n=0;"center"===o.pos?a=t.elem.outerWidth()/2:"left"===o.pos||"down-left"===o.pos?n=-(t.elem.outerHeight()/2):"right"!==o.pos&&"down-right"!==o.pos||(a=t.elem.outerWidth(),n=-(t.elem.outerHeight()/2)),o.rootScroll=t.rootScroll?t.rootScroll:app.$dom.root,setTimeout(function(){app.$dom.body.on("click.dropdown",function(t){o.hide()})},5),o.update(),e.css({top:o.rootScroll[0].scrollTop+i.top+t.elem.outerHeight()+"px",left:i.left+"px",marginLeft:a+"px",marginTop:n+"px"})}},o.hide=function(){app.$dom.body.off("click.dropdown"),o.active=!1,o._id&&(o._id=null),o.update()},o.onSelect=function(){var t=this.item._id||this.item;o.value=t,this.item&&_.isFunction(this.item.callback)&&this.item.callback(),o.callback&&o.callback(t||this.item)}}),riot.tag2("ui-input",'<input oninput="{onInput}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" class="input input-{opts.size ? opts.size : \'m\'}" riot-value="{value}" disabled="{typeof opts.disabled !== \'undefined\'}">',"","",function(t){var o=this;o.on("before-mount",function(){o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.value=o.opts.value}),o.on("update",function(){!o.opts.value&&o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.opts.value&&o.opts.value!==o.value&&(o.value=o.opts.value)}),o.onInput=function(t){var e=t.target.value;o.opts.commit===!0||"true"==o.opts.commit?o.parent.update():_.isFunction(o.opts.commit)?o.opts.commit.call(this,e,o.opts.i):o.opts.commit&&o.parent[o.opts.commit]&&o.parent[o.opts.commit](e,o.opts.i),o.opts.update&&o.opts.cursor&&o.opts.cursor.set(o.opts.update,e)}}),riot.tag2("ui-select",'<select onchange="{onChange}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" disabled="{disable}"> <option each="{item in opts.items}" selected="{item._id == value || item == value}" riot-value="{item._id ? item._id : item}">{item.title ? item.title : item}</option> </select>',"","class=\"select select-{opts.size ? opts.size : 'm'} {short : typeof opts.short !== 'undefined'}\"",function(t){var o=this;o.on("before-mount",function(){o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.value=o.opts.value,o.disable=o.opts.disable}),o.on("update",function(){!o.opts.value&&o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.opts.value&&o.opts.value!==o.value&&(o.value=o.opts.value),_.isBoolean(o.opts.disable)&&o.opts.disable!==o.disable&&(o.disable=o.opts.disable)}),o.onChange=function(t){var e=t.target.value;o.opts.commit===!0||"true"==o.opts.commit?o.parent.update():_.isFunction(o.opts.commit)?o.opts.commit.call(this,e,o.opts.i):o.opts.commit&&o.parent[o.opts.commit]&&o.parent[o.opts.commit](e,o.opts.i),o.opts.update&&o.opts.cursor&&o.opts.cursor.set(o.opts.update,e)}}),riot.tag2("ui-slider",'<span if="{opts.title}" class="input-title">{opts.title}</span> <input class="display-none" name="slider_input" type="range" riot-value="{opts.value}" min="{opts.min}" max="{opts.max}" step="{opts.step}" readonly="{opts.readonly}"> <input class="input input-{opts.size ? opts.size : \'m\'}" onkeyup="{onKeySlider}" name="slider_data" autocomplete="off" riot-value="{opts.value}" readonly="{opts.readonly}" type="{\'number\'}"> <div if="{opts.ed && !app.device.isPhone}" class="pos-tr c-blue fontSize-20 fontWeight-5 flex-centered w40 h100p">{opts.ed}</div>',"",'class="display-block pos-rel"',function(t){var o=this;o.input=o.slider_data,o.on("before-mount",function(){o.opts.update&&o.opts.cursor&&(o.opts.value=o.opts.cursor.get(o.opts.update))}),o.on("mount",function(){!o.opts.phone&&app.device.isPhone||(o.slider=$$(o.slider_input),o.value=o.opts.value,setTimeout(function(){o.slider.rangeslider({polyfill:!1,orientation:"horizontal",rangeClass:"rangeslider",horizontalClass:"rangeslider--horizontal",fillClass:"rangeslider-track",handleClass:"rangeslider-handle",onSlide:function(t,e){o.input.value=e,o.value=e,o.fnCommit(e)}})},5),o.slider.val(o.value),o.commit=o.opts.commit?o.opts.commit:null)}),o.change=function(t){o.slider?o.slider.val(t).change():o.input.value=t,o.value=t,o.fnCommit(t)},o.onKeySlider=function(t){var e=t.target.value;o.value=e,o.fnCommit(e)},o.fnCommit=function(t){o.commit===!0||"true"==o.commit?o.parent.update():_.isFunction(o.commit)?o.commit.call(this,t,o.opts.i):o.commit&&o.parent[o.commit]&&o.parent[o.commit](t,o.opts.i),o.opts.update&&o.opts.cursor&&o.opts.cursor.set(o.opts.update,t)},this.on("unmount",function(){o.slider&&o.slider.rangeslider("destroy")})}),riot.tag2("ui-switcher",'<div class="switch"> <input class="switch-input" type="checkbox" checked=""> <span class="switch-left">ON</span> <label class="switch-label">&nbsp;</label> <span class="switch-right">OFF</span> </div>',"",'onclick="{onClick}" onupdate="{opts.onupdate ? opts.onupdate : ⁗self⁗}" class="switcher" active="{value}"',function(t){var o=this;o.on("before-mount",function(){o.value=o.opts.value}),o.onClick=function(){o.value=!o.value,o.opts.commit===!0||"true"==o.opts.commit?o.parent.update():_.isFunction(o.opts.commit)?o.opts.commit.call(this,o.value,o.opts.i):o.opts.commit&&o.parent[o.opts.commit]&&o.parent[o.opts.commit](o.value,o.opts.i)}}),riot.tag2("ui-textarea",'<textarea oninput="{onInput}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" class="textarea textarea-{opts.size ? opts.size : \'m\'}" disabled="{typeof opts.disabled !== \'undefined\'}">{value}</textarea>',"","",function(t){var o=this;o.on("before-mount",function(){o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.value=o.opts.value}),o.on("update",function(){!o.opts.value&&o.opts.update&&o.opts.cursor?o.value=o.opts.cursor.get(o.opts.update):o.opts.value&&o.opts.value!==o.value&&(o.value=o.opts.value)}),o.onInput=function(t){var e=t.target.value;o.opts.commit===!0||"true"==o.opts.commit?o.parent.update():_.isFunction(o.opts.commit)?o.opts.commit.call(this,e,o.opts.i):o.opts.commit&&o.parent[o.opts.commit]&&o.parent[o.opts.commit](e,o.opts.i),o.opts.update&&o.opts.cursor&&o.opts.cursor.set(o.opts.update,e)}}),riot.tag2("screen-begin-mobile",'<div class="text__wrapper"> <div name="text1" class="anim-text anim-text-bt {anim-textIn : animate.text1.in, anim-textOut : animate.text1.out}" delay-hide="s"> Мы вам поможем подобрать готовый комплект для вашей подсветки </div> </div> <div class="text__wrapper"> <div name="text2" class="anim-text anim-text-bt {anim-textIn : animate.text2.in, anim-textOut : animate.text2.out}" delay-hide="m"> Уделите несколько минут внимания, и выбранный комплект будет радовать вас долгие годы </div> </div>',"",'class="section"',function(t){var o=this;$$(this.root);o.animate={text1:{in:!1,out:!1},text2:{in:!1,out:!1}},o.show=function(){$afterlag.m(function(){o.animate.text1.in=!0,o.update(),_.onEndAnimation(o.text1,function(){o.animate.text1.in=!1,o.animate.text1.out=!0,o.update(),_.onEndAnimation(o.text1,function(){o.animate.text1.out=!1,o.animate.text2.in=!0,o.update(),_.onEndAnimation(o.text2,function(){o.animate.text2.in=!1,o.animate.text2.out=!0,o.update(),_.onEndAnimation(o.text2,function(){o.animate.text2.out=!1,o.update(),$Screens.step1.show()})})})})})}}),riot.tag2("screens-mobile","<screen-begin-mobile></screen-begin-mobile> <screen-step1-mobile></screen-step1-mobile> <screen-step2-mobile></screen-step2-mobile> <screen-podbor-mobile></screen-podbor-mobile>","",'class="screens section"',function(t){var o=this;o.on("before-mount",function(){$Screens={self:o,begin:o.tags["screen-begin-mobile"],step1:o.tags["screen-step1-mobile"],step2:o.tags["screen-step2-mobile"],podbor:o.tags["screen-podbor-mobile"]},$Screen=$Screens.podbor}),o.on("steps-hidden",function(){$Screens.begin.root.setAttribute("data-visible",!1),$Screens.step1.root.setAttribute("data-visible",!1),$Screens.step2.root.setAttribute("data-visible",!1)})}),riot.tag2("screen-step1-mobile",'<div class="rows pos-abs-full"> <div class="header"> <div name="tooltip" class="tooltip anim-group2 anim-tb">Выберите тип подсветки</div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" data-light="mono" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="xs">Монохромная</div> </div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" delay-show="xs" data-light="rgb" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="s">Мультицветная</div> </div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" delay-show="s" data-light="lightrun" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="m">Бегущий огонь</div> </div> </div> </div>',"",'class="section" data-active="{active}"',function(t){
var o=this;$$(this.root);o.active=!1,o.on("mount",function(){o.animate=new app.plugins.animate(o.root,{showAfter:1})}),o.show=function(){$afterlag.m(function(){o.animate.show()}),_.onEndTransition(o.tooltip,function(){o.update({active:!0})})},o.select=function(t){o.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},o.hide=function(t){o.animate.hide(),o.update({active:!1}),_.isFunction(t)&&_.onEndTransition(o.tooltip,function(){o.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("screen-step2-mobile",'<div class="rows pos-abs-full"> <div class="header"> <div name="tooltip" class="tooltip anim-group2 anim-tb" data-duration="xl">Выберите класс компонентов</div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" data-pack="lux" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft"> <div class="name"> <div class="count">24</div> комплектов <div class="price">от 12,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Люкс</div> </div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" delay-show="xs" data-pack="norm" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft" delay-show="xs"> <div class="name"> <div class="count">31</div> комплектов <div class="price">от 8,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Норма</div> </div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" delay-show="s" data-pack="econom" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft" delay-show="s"> <div class="name"> <div class="count">28</div> комплектов <div class="price">от 6,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Эконом</div> </div> </div> </div>',"",'class="section" data-active="{active}"',function(t){var o=this;$$(this.root);o.active=!1,o.on("mount",function(){o.animate=new app.plugins.animate(o.root,{showAfter:1})}),o.show=function(){$afterlag.run(function(){o.animate.show()}),_.onEndTransition(o.tooltip,function(){o.update({active:!0})})},o.select=function(t){o.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},o.hide=function(t){o.animate.hide(),o.update({active:!1}),_.isFunction(t)&&_.onEndTransition(o.tooltip,function(){o.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("connect-control","","",'onclick="{toggle}" class="connect__control" data-active="{$State.get(\'control\')}" data-hidden="{hidden}"',function(t){var o=this;o.hidden=!1,o.toggle=function(){$State.set("control",!$State.get("control"))},o.show=function(){o.root.setAttribute("data-hidden",!1)},o.hide=function(){o.root.setAttribute("data-hidden",!0)}}),riot.tag2("offer-manager",'<div class="container"> <div class="row anim anim-scale-soft {animated : $Config.get(\'offers\', \'manager\')}" duration-hide="s"> <div class="col-md-8"> <div class="pt-s pl-l pr-m fontSize-20 lineHeight-xxxl"> <div class="avatar" style="background-image:url(/assets/images/avatars/1.jpg)"></div> <div class="avatar__name">Ваш менеджер, Дарья</div> <div class="avatar__text">Мой телефон: <strong>8 (909) 900-12-20</strong></div> <div class="sign"><a target="_blank" class="link" href="http://ledtop-shop.ru">LEDTOP-Shop.ru</a> / приятного освещения!</div> </div> </div> <div class="col-md-16"> <div class="pl-m pr-xl"> <div class="message"> <div class="message__corner"></div> Михаил, в продолжении нашего разговора я подобрала по вашим требования комплект. Если потребуется, здесь вы можете модифицировать мою конфигурацию и внести свои изменения. <p>Для дальнейшей консультации, я для Вас на связи!</p> <button onclick="{hide}" class="btn btn-xl btn-white">Перейти к комплекту</button> </div> </div> </div> </div> </div>',"",'class="oScreen zIndex-100" data-open="{$Config.get(\'offers\', \'manager\')}" data-color="blue"',function(t){this.hide=function(){$Config.select("offers","manager").set(!1)}}),riot.tag2("screen-podbor",'<offer-manager></offer-manager> <section-control></section-control> <div class="content"> <div class="rows"> <div class="row"> <product-item name="ledribbon" item="{$Data.getProduct(\'ledribbon\')}"></product-item> <product-item name="power-supply" item="{$Data.getProduct(\'power-supply\')}"></product-item> <product-item name="ir-control" item="{$Data.getProduct(\'ir-control\')}"></product-item> </div> </div> <div name="buttonHelp" class="buttons-angle" data-pos="top-right"> <div onclick="{open.tutorial}" onupdate="none" class="button__help"></div> </div> </div>',"",'class="section" data-active="false" data-visible="{!hidden}" data-animate="true" is-animate="false"',function(t){var o=this,e=$$(this.root);o.active=!1,o.hidden=!0,o.tooltipScreen=null,o.show=function(t){o.hidden=!1,o.update(),$afterlag.run(function(){t?(o.root.setAttribute("is-animate",!0),_.onEndTransition(o.buttonHelp,function(){o.root.setAttribute("data-animate",!1),o.root.setAttribute("data-active",!0),$Config.get("tutorial")&&o.open.tutorial(),$Router.params.set($State.get()),o.active=!0})):(o.root.setAttribute("data-animate",!1),o.root.setAttribute("data-active",!0),$Router.params.set($State.get()),o.active=!0)},{iterations:5,timeout:2e3})},o.open={tutorial:function(){$Tutorial.show(e,"podbor"),$Config.set("tutorial",!1)}},o.on("before-mount",function(){$Control=o.tags["section-control"],$Control.wrapper=$Control.tags["control-wrapper"],$Control.light=$Control.wrapper.tags["control-light"],$Control.humidity=$Control.wrapper.tags["control-humidity"],$Control.color=$Control.wrapper.tags["control-color"],$Control.length=$Control.wrapper.tags["control-length"],$Product={ledribbon:o.ledribbon._tag,"power-supply":o["power-supply"]._tag,"ir-control":o["ir-control"]._tag},o.setParams=function(){$Router.params.set($State.get())};var t=_.debounce(o.setParams,100);$State.on("update",function(e){var i=o.getPropValue(e),a=i.prop;i.value;a&&"control"==a&&$Product["ir-control"].update(),o.active&&t()}),$Config.on("update",function(t){var e=o.getPropValue(t),i=e.prop,a=e.value;i&&("showProducts"!=i||!a||$Config.get("tooltipScreen")||$Tutorial.active||$afterlag.run(function(){$Config.get("tooltipScreen")||("ledribbon"==a?o.tooltipScreen=$Product["ir-control"].tags["product-tooltip-screen"]:"power-supply"==a?o.tooltipScreen=$Product.ledribbon.tags["product-tooltip-screen"]:"ir-control"==a&&(o.tooltipScreen=$Product.ledribbon.tags["product-tooltip-screen"]),o.tooltipScreen.show())},{delay:500,iterations:5}))}),o.reRender()}),o.getFirstProduct=function(t){var o=$store[t].get()[0];return o.pack="norm",o},o.getProducts=function(t){var e=[];packs=["econom","norm","lux"];for(var i=0;i<packs.length;i++){var a=[];a=_.copyArray($store[t].get()).map(function(e,a){return e.pack=packs[i],"econom"!=packs[i]&&"lux"!=packs[i]||(e.article=o.store[t][packs[i]][a],e.photo="http://ledtop-shop.ru/files/catalog/"+e.article+".jpg"),e}),e=e.concat(a)}return e},o.store={ledribbon:{econom:["010523","020692"],lux:["013393","014676"]},power:{econom:["017831","012919","008889","010505"],lux:["017855","015992","011895","018308"]},control:{econom:["012987","021098","015422","020170","011439"],lux:["016678","016476","018609","016927","021025"]}},o.reRender=function(){var t=[{_id:"ledribbon",title:"Лента",product:o.getFirstProduct("ledribbon"),products:o.getProducts("ledribbon")},{_id:"power-supply",title:"Блок питания",product:o.getFirstProduct("power"),products:o.getProducts("power")},{_id:"ir-control",title:"Управление",product:o.getFirstProduct("control"),products:o.getProducts("control")}];$Data=_.extend(new Baobab(t),{getProduct:function(t){return $Data.select({_id:t})},getProductsList:function(t,o){return _.where($Data.select({_id:t}).get("products"),{pack:o})},getProductsCount:function(t){var o=$Data.select({_id:t}).get("products");return o?o.length:0}})},o.getPropValue=function(t){var o=t.data&&t.data.transaction&&t.data.transaction.length&&t.data.transaction[0].path?t.data.transaction[0].path[0]:null,e=t.data&&t.data.transaction&&t.data.transaction.length?t.data.transaction[0].value:null;return{prop:o,value:e}}}),riot.tag2("product-content",'<div class="title">{parent.opts.item.get().title}</div> <div class="product__label">{parent.opts.item.get(\'product\').pack}</div> <div onclick="{parent.tags[⁗products-list⁗].toggle}" onupdate="none" class="product__select"> <div class="product__select__count">{$Data.getProductsCount(parent.opts.item.get(⁗_id⁗))}</div> </div> <div class="product__item"> <div class="product__item__photo"> <img class="product__item__photo__image" riot-src="{parent.opts.item.get(\'product\').photo}"> </div> <div class="product__item__title">{parent.opts.item.get(\'product\').desc}</div> </div> <div class="product__price">{_.numberFormat(parent.opts.item.get(\'product\').price, 0, ⁗⁗, ⁗,⁗)} ₽ {⁗/ м⁗ : parent.opts.item.get(⁗_id⁗) == ⁗ledribbon⁗}</div> <div class="product__scribble">Не нужно управлять</div>',"",'class="product__content"',function(t){}),riot.tag2("product-item","<product-content></product-content> <connect-control></connect-control> <products-list></products-list> <product-tooltip-screen></product-tooltip-screen>","",'class="col-md-8 product" data-pack="{opts.item.get(\'product\').pack}" data-product="{opts.item.get(⁗_id⁗)}" data-hidden="{opts.item.get(⁗_id⁗) === ⁗ir-control⁗ && !$State.get(\'control\')}"',function(t){}),riot.tag2("product-tooltip-screen",'<div class="product__tooltip__screen__text"> Все представленные компоненты прошли тщательный отбор и отвечают всем современным требованиям. </div>',"",'onmouseover="{hide}" onupdate="none" class="product__tooltip__screen" data-active="{active}"',function(t){var o=this;o.active=!1,o.show=function(){o.update({active:!0}),$afterlag.run(function(){o.hide()},{delay:3e3,iterations:5}),$Config.set("tooltipScreen",!0)},o.hide=function(){o.active&&$afterlag.run(function(){o.update({active:!1})},{delay:1e3,iterations:5})}}),riot.tag2("products-list",'<div class="products__list__container"> <div onclick="{hide}" onupdate="none" class="products__list__close">скрыть</div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'lux\').length}"> <div class="products__list__title">LUX</div> <div class="rows products__list__items" data-items="lux"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), \'lux\')}" data-id="{item.article}" class="col-md-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'norm\').length}"> <div class="products__list__title">Норма</div> <div class="rows products__list__items" data-items="norm"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), ⁗norm⁗)}" data-id="{item.article}" class="col-md-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'econom\').length}"> <div class="products__list__title">Эконом</div> <div class="rows products__list__items" data-items="econom"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), ⁗econom⁗)}" data-id="{item.article}" class="col-md-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> </div>',"",'class="products__list" data-active="false"',function(t){var o=this,e=$$(o.root);o.active=!1,o.selected=null,o.product=null,o.on("mount",function(){e.on("mouseenter mouseleave",".products__list__item",function(t){if("true"!=t.currentTarget.getAttribute("data-active"))if("mouseenter"===t.type){o.product=_.copyArray(o.parent.opts.item.get("product"));var e=o.parent.opts.item.get("products",{article:t.currentTarget.getAttribute("data-id")});o.selected=o.product.article,o.parent.opts.item.set("product",e),$Product[o.parent.opts.item.get("_id")].update()}else o.selected=null,o.parent.opts.item.set("product",o.product),$Product[o.parent.opts.item.get("_id")].update()})}),o.get={select:function(t){return o.selected?o.selected===t.article:o.parent.opts.item.get("product").article===t.article}},o.onSelect=function(){o.selected=null,o.parent.opts.item.set("product",this.item),$Product[o.parent.opts.item.get("_id")].update(),o.hide()},o.toggle=function(){!o.active&&$Config.get("showProducts")?$Notify.show({color:"primary",text:"Завершите предыдущий выбор"}):(o.active=!o.active,o.control())},o.show=function(){o.active=!0,o.control()},o.hide=function(){o.active=!1,o.control()},o.control=function(){o.parent.root.setAttribute("data-products",o.active),o.root.setAttribute("data-active",o.active),o.active?($Product["power-supply"].tags["connect-control"].hide(),$Config.set("showProducts",o.parent.opts.item.get("_id"))):($Product["power-supply"].tags["connect-control"].show(),$Config.set("showProducts",!1))}}),riot.tag2("section-control-mobile","<control-wrapper></control-wrapper>","",'class="section__control section-hidden" data-pos="left" data-short="true" data-open="false"',function(t){var o=this;o.show=function(){o.root.setAttribute("data-open",!0),$Screen.trigger("overlay",!0)},o.hide=function(){o.root.setAttribute("data-open",!1),$Screen.trigger("overlay",!1)}}),riot.tag2("section-menu-mobile",'<div onclick="{hide}" onupdate="none" class="button__close"></div> <div class="section__menu__title">Меню</div> <div onclick="{open.profile}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="email"></div> <div class="section__menu__item__title">Отпр. рассчет себе</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="order"></div> <div class="section__menu__item__title">Сделать предзаказ</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="callback"></div> <div class="section__menu__item__title">Заказать звонок</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="question"></div> <div class="section__menu__item__title">Задать вопрос</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="votes"></div> <div class="section__menu__item__title">Оценить сервис</div> </div>',"",'class="section__menu section-hidden bg-white zIndex-2" data-pos="right" data-notfully="true" data-open="{active}"',function(t){var o=this;o.active=!1,o.show=function(){$Screen.trigger("hidden",!0),o.update({active:!0})},o.open={profile:function(){},changePlan:function(){$Sections.payment.section.show("premium")}},o.hide=function(){$Screen.trigger("hidden",!1),o.update({active:!1})}}),riot.tag2("section-navbar-mobile",'<div class="container"> <div class="row"> <div class="col-xs-17 cell-left"> <div onclick="{$Control.show}" onupdate="none" class="btn__control"></div> <div class="pack__name">НОРМА-2: одноцветная</div> </div> <div class="col-xs-7 cell-right"> <div class="btn__ok"></div> <div onclick="{$Menu.show}" onupdate="none" class="btn__menu"></div> </div> </div> </div>',"","",function(t){}),riot.tag2("screen-podbor-mobile",'<section-control-mobile></section-control-mobile> <section-menu-mobile></section-menu-mobile> <div class="section__content"> <section-navbar-mobile></section-navbar-mobile> <div class="content"> <div class="rows"> <div class="row"> <product-item-mobile name="ledribbon" item="{$Data.getProduct(\'ledribbon\')}"></product-item-mobile> <product-item-mobile name="power-supply" item="{$Data.getProduct(\'power-supply\')}"></product-item-mobile> <product-item-mobile name="ir-control" item="{$Data.getProduct(\'ir-control\')}"></product-item-mobile> </div> </div> </div> </div> <section-products-list-mobile></section-products-list-mobile> <section-result-count></section-result-count> <div class="section__overlay"></div>',"",'class="section" data-active="false" data-overlay="false" data-visible="{!hidden}" data-animate="true" is-animate="false" data-hidden="false"',function(t){var o=this,e=$$(this.root);o.active=!1,o.hidden=!0,o.tooltipScreen=null,o.show=function(t){$Screens.self.trigger("steps-hidden"),o.hidden=!1,o.update(),o.root.setAttribute("data-animate",!1),o.root.setAttribute("data-active",!0),$Router.params.set($State.get())},o.open={tutorial:function(){$Tutorial.show(e,"podbor"),$Config.set("tutorial",!1)}},o.on("overlay",function(t){o.root.setAttribute("data-overlay",t)}),o.on("hidden",function(t){o.root.setAttribute("data-hidden",t)}),o.on("before-mount",function(){$Navbar=o.tags["section-navbar-mobile"],$Menu=o.tags["section-menu-mobile"],o.sections={resultCount:o.tags["section-result-count"],productsList:o.tags["section-products-list-mobile"]},$Control=o.tags["section-control-mobile"],$Control.wrapper=$Control.tags["control-wrapper"],$Control.light=$Control.wrapper.tags["control-light"],$Control.humidity=$Control.wrapper.tags["control-humidity"],$Control.color=$Control.wrapper.tags["control-color"],$Control.length=$Control.wrapper.tags["control-length"],$Product={ledribbon:o.ledribbon._tag,"power-supply":o["power-supply"]._tag,"ir-control":o["ir-control"]._tag},o.setParams=function(){$Router.params.set($State.get())};var t=_.debounce(o.setParams,100);$State.on("update",function(e){var i=o.getPropValue(e),a=i.prop;i.value;a&&"control"==a&&$Product["ir-control"].update(),o.active&&t()}),o.reRender()}),o.getFirstProduct=function(t){var o=$store[t].get()[0];return o.pack="norm",o},o.getProducts=function(t){var e=[];packs=["econom","norm","lux"];for(var i=0;i<packs.length;i++){var a=[];a=_.copyArray($store[t].get()).map(function(e,a){return e.pack=packs[i],"econom"!=packs[i]&&"lux"!=packs[i]||(e.article=o.store[t][packs[i]][a],e.photo="http://ledtop-shop.ru/files/catalog/"+e.article+".jpg"),e}),e=e.concat(a)}return e},o.store={ledribbon:{econom:["010523","020692"],lux:["013393","014676"]},power:{econom:["017831","012919","008889","010505"],lux:["017855","015992","011895","018308"]},control:{econom:["012987","021098","015422","020170","011439"],lux:["016678","016476","018609","016927","021025"]}},o.reRender=function(){var t=[{_id:"ledribbon",title:"Лента",product:o.getFirstProduct("ledribbon"),products:o.getProducts("ledribbon")},{_id:"power-supply",title:"Блок питания",product:o.getFirstProduct("power"),products:o.getProducts("power")},{_id:"ir-control",title:"Управление",product:o.getFirstProduct("control"),products:o.getProducts("control")}];$Data=_.extend(new Baobab(t),{getProduct:function(t){return $Data.select({_id:t})},getProductsList:function(t,o){return _.where($Data.select({_id:t}).get("products"),{pack:o})},getProductsCount:function(t){var o=$Data.select({_id:t}).get("products");return o?o.length:0}})},o.getPropValue=function(t){var o=t.data&&t.data.transaction&&t.data.transaction.length&&t.data.transaction[0].path?t.data.transaction[0].path[0]:null,e=t.data&&t.data.transaction&&t.data.transaction.length?t.data.transaction[0].value:null;return{prop:o,value:e}}}),riot.tag2("product-content-mobile",'<div class="title">{parent.opts.item.get().title}</div> <div class="product__label">{parent.opts.item.get(\'product\').pack}</div> <div class="rows product__item"> <div class="col-xs-12 product__item__text"> <p>{parent.opts.item.get(\'product\').desc}</p> </div> <div class="col-xs-12 product__item__photo"> <img class="product__item__photo__image" riot-src="{parent.opts.item.get(\'product\').photo}"> </div> </div> <div class="product__price">+ {_.numberFormat(parent.opts.item.get(\'product\').price, 0, ⁗⁗, ⁗,⁗)} <span class="rub">₽</span> {⁗/ м⁗ : parent.opts.item.get(⁗_id⁗) == ⁗ledribbon⁗}</div> <div onclick="{open.products}" class="product__select"> <div class="product__select__count">{$Data.getProductsCount(parent.opts.item.get(⁗_id⁗))}</div> </div> <div class="product__scribble">Не нужно управлять</div>',"",'class="display-block"',function(t){var o=this;o.open={products:function(){$Screen.sections.productsList.show(o.parent.opts.item.get("_id"))}}}),riot.tag2("product-item-mobile","<product-content-mobile></product-content-mobile> <connect-control></connect-control>","",'class="col-xs-24 product" data-pack="{opts.item.get(\'product\').pack}" data-product="{opts.item.get(⁗_id⁗)}" data-hidden="{opts.item.get(⁗_id⁗) === ⁗ir-control⁗ && !$State.get(\'control\')}"',function(t){this.on("before-mount",function(){})}),riot.tag2("section-products-list-mobile",'<div onclick="{hide}" onupdate="none" class="button__close"></div> <products-list></products-list>',"",'class="pos-abs-full section-hidden overflowY-auto bg-white zIndex-2" data-pos="right" data-open="false"',function(t){var o=this;o.show=function(t){o.root.setAttribute("data-open",!0),$Screen.trigger("hidden",!0)},o.hide=function(){o.root.setAttribute("data-open",!1),$Screen.trigger("hidden",!1)}}),riot.tag2("section-result-count",'<div class="title">Найдено</div> <div class="count">36</div> <div class="subtitle">комплектов</div>',"","",function(t){}),riot.tag2("control-color-item","","",'class="control__color__items" data-items="{opts.content.split(\'|\').length}"',function(t){this.on("updated",function(){this.root.innerHTML=this.opts.content.split("|").map(function(t){return'<span class="control__color__item color-'+t+'"></span>'}).join("")})}),riot.tag2("control-color",'<div onclick="{toggle}" onupdate="none" class="control__icon" data-color="{$State.get(\'color\')}"> <control-color-item content="{$State.get(\'color\')}">{item}</control-color-item> </div> <div class="control__container flex-row-left-center"> <div class="control__container__title">цвет свечения</div> <div onclick="{select}" onupdate="none" each="{item in items}" class="control__color" data-active="{item == $State.get(\'color\')}" data-color="{item}"> <control-color-item content="{item}">{item}</control-color-item> </div> </div>',"",'class="control" data-active="{active}"',function(t){var o=this;o.active=!1,o.items=["blue","cool_white","day_white","warm_white","yellow","green","ir850","orange","pink","red","violet"],o.toggle=function(){o.update({active:!o.active})},o.select=function(){$State.set("color",this.item),o.hide()},o.hide=function(){o.update({active:!1})}}),riot.tag2("control-humidity",'<div onclick="{toggle}" onupdate="none" class="control__value">{$State.get(\'humidity\')}</div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="humidity"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">влагозащищенность</div> <div class="nowrap fontSize-0"> <div onclick="{select}" onupdate="none" each="{item in items}" class="pos-rel display-inlineBlock" data-balloon="{item.tooltip}" data-balloon-pos="up"> <div class="btn {item.title == $State.get(\'humidity\') ? \'btn-primary\' : \'btn-primary-hover\'} btn-m w40 p0 mlr-xxs text-center"> {item.title} </div> </div> </div> </div>',"",'class="control" data-active="{active}"',function(t){var o=this;o.active=!1,o.items=[{title:"P64",tooltip:"Защита от брызгов воды"},{title:"P65",tooltip:"Защита от струй воды"},{title:"P66",tooltip:"Сильная струя воды"},{title:"P67",tooltip:"Погружение под воду"}],o.toggle=function(){o.update({active:!o.active})},o.select=function(){$State.set("humidity",this.item.title),o.hide()},o.hide=function(){o.update({active:!1})}}),riot.tag2("control-length",'<div onclick="{toggle}" onupdate="none" class="control__value">{$State.get(\'length\')}м</div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="length"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">длина ленты</div> <ui-slider update="length" cursor="{$State.select()}" size="m" min="5" max="50" step="5" ed="м" readonly="true"></ui-slider> <div onclick="{hide}" onupdate="none" class="control__button"></div> </div>',"",'class="control" data-active="{active}"',function(t){var o=this;o.active=!1,o.toggle=function(){o.update({active:!o.active})},o.hide=function(){o.update({active:!1})}}),riot.tag2("control-light",'<div onclick="{toggle}" onupdate="none" class="control__light__icon" data-light="{$State.get(\'light\')}"></div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="light"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">тип освещения</div> <div onclick="{select}" onupdate="none" each="{item in items}" class="control__light__item" data-balloon="{item.tooltip}" data-balloon-pos="up" data-light="{item.title}"></div> </div>',"",'class="control" data-active="{active}"',function(t){var o=this;o.active=!1,o.items=[{title:"mono",tooltip:"Монохромная"},{title:"rgb",tooltip:"Мультицветная"},{title:"lightrun",tooltip:"Бегущий огонь"}],o.toggle=function(){o.update({active:!o.active})},o.select=function(){$State.set("light",this.item.title),o.hide()},o.hide=function(){o.update({active:!1})}}),riot.tag2("control-wrapper",'<div if="{app.device.isPhone}" onclick="{parent.hide}" onupdate="none" class="control back"></div> <div if="{!app.device.isPhone}" onclick="{open}" onupdate="none" class="control"> <div class="button__ok"></div> </div> <control-light></control-light> <control-humidity></control-humidity> <control-color></control-color> <control-length></control-length>',"",'class="control__wrapper"',function(t){var o=this;o.open=function(){}}),riot.tag2("section-control","<control-wrapper></control-wrapper>","",'class="section__control"',function(t){});