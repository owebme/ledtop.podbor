riot.tag2("root-main",'<div class="screens"></div> <section-tutorial></section-tutorial> <section-notify></section-notify>',"","",function(t){$$=window.jQuery||window.Zepto,$root=this,$rootScope=$$(this.root),app.ver="1.0";var e={pack:"norm",tooltipScreen:!1,showProducts:!1,tutorial:!0,offers:{manager:!1}},o={control:!0,light:"rgb",color:"green",humidity:"P67",length:"25"};$Router.params.get()&&(_.extend(o,$Router.params.get()),o.control="false"!==o.control);var i=Store.get("appVer");i&&i==app.ver?Store.get("config")&&(_.extend(e,Store.get("config")),e.showProducts=!1):(Store.clear(),Store.set("appVer",app.ver)),$Config=new Baobab(e,{autoCommit:!0}),$State=new Baobab(o,{autoCommit:!0}),$Config.on("update",function(t){Store.set("config",$Config)}),app.config.changeStyles&&app.plugins.styles.init({elem:"#styles",default:"normal",screens:[{title:"normal",maxWidth:1400,path:"/assets/css/style.css"},{title:"large",minWidth:1400,path:"/assets/css/style.largeScreen.css"}]}),this.on("mount",function(){$Tutorial=$root.tags["section-tutorial"],$Notify=$root.tags["section-notify"],app.router.init()})}),riot.tag2("section-alert",'<div class="alert__wrapper"> <div class="alert__header"> <h3 class="alert__title">{data.title}</h3> <p if="{data.subtitle}" class="alert__subtitle">{data.subtitle}</p> </div> <div class="alert__buttons"> <div onclick="{onCancel}" class="alert__button {alert__button--active : data.button === ⁗cancel⁗}">{data.cancel && data.cancel.title ? data.cancel.title : ⁗Отмена⁗}</div> <div onclick="{onSuccess}" class="alert__button {alert__button--active : data.button === ⁗success⁗}">{data.success && data.success.title ? data.success.title : ⁗OK⁗}</div> </div> </div>',"",'class="alert" data-open="{active}"',function(t){var e=this;$$(e.root);e.active=!1,e.data={title:null,subtitle:null},e.show=function(t){t&&(e.data=t,e.active=!0,e.update())},e.onSuccess=function(){e.data.success&&"function"==typeof e.data.success.callback&&e.data.success.callback(),e.data.button="success",e.active=!1},e.onCancel=function(){e.data.cancel&&"function"==typeof e.data.cancel.callback&&e.data.cancel.callback(),e.data.button="cancel",e.active=!1}}),riot.tag2("section-loader",'<div class="loader-spinner"></div>',"",'class="loader" data-show="{active}"',function(t){var e=this;e.active=!1,e.show=function(){return e.update({active:!0}),new Promise(function(t,o){_.onEndTransition(e.root,function(){return t()})})},e.hide=function(){e.update({active:!1})}}),riot.tag2("section-notify",'<div onclick="{hide}" name="notify" class="notify {opts.size ? \'notify-\' + opts.size : \'notify-m\'}" data-color="{opts.color ? opts.color : ⁗primary⁗}" riot-style="max-width:{opts.maxWidth ? opts.maxWidth : \'400px\'} {opts.width ? \'width:\' + opts.width : null}">{opts.text}</div>',"",'class="notify-wrapper" data-active="{active}" data-pos="{opts.pos ? opts.pos : ⁗top-left⁗}"',function(t){var e=this;e.active=!1,e.timeout=3,e.interval=null,e.opts={pos:"top-left"},e.on("mount",function(){setTimeout(function(){e.root.style.display="block"},20)}),e.show=function(t){return clearTimeout(e.interval),e.active&&e.autoHide(t),t.pos!=e.opts.pos?(e.update({opts:t}),setTimeout(function(){e.update({active:!0})},200)):e.update({opts:t,active:!0}),new Promise(function(o,i){_.onEndTransition(e.notify,function(){return e.autoHide(t),o()})})},e.autoHide=function(t){t.timeout!==!1&&(e.interval=setTimeout(function(){e.hide()},t.timeout?1e3*t.timeout:1e3*e.timeout))},e.hide=function(){e.update({active:!1})}}),riot.tag2("oscreen-loader",'<div class="oScreen__loader__progress" riot-style="width:{status}%" data-anim="{animate}"></div> <div class="oScreen__loader__spinner"></div>',"",'class="oScreen__loader"',function(t){var e=this;e.active=!1,e.status=0,e.animate=!1,e.progress=null,e.show=function(t){t&&!e.active&&(e.active=!0,e.start=t.start||$$.noop,e.end=t.end||$$.noop,e.callback=t.callback||$$.noop,e.scope=$$(t.scope)[0],e.reset(),e.parent.update({loading:!0}),app.device.isMobile&&e.update({animate:!0}),e.start(),_.onEndTransition(e.scope,function(){t.resources?app.loader.resources(t.resources,e.onResourcesLoaded,function(){e.status+=25/t.resources.length,e.updateLoading()}):(e.status+=25,e.onResourcesLoaded(),e.updateLoading()),$afterlag.run(function(){_.isFunction(t.tag)?(e.html=t.tag(),e.html.one("updated",function(){$afterlag.run(function(){e.onHtmlLoaded(t.content)})})):e.onHtmlLoaded(t.content)})}))},e.init=function(){e.progress.resources&&e.progress.images&&e.progress.html&&(e.status=100,e.updateLoading(),setTimeout(e.hide,175))},e.onImagesLoaded=function(){e.progress.images=!0,e.init()},e.onImagesItemLoaded=function(t,o){e.status+=25/o,e.updateLoading()},e.onResourcesLoaded=function(){e.progress.resources=!0,e.animate=!0,e.init()},e.onHtmlLoaded=function(t){e.progress.html=!0,e.status+=50,e.animate=!1,e.updateLoading(),app.loader.images($$(t),e.onImagesLoaded,e.onImagesItemLoaded),e.init()},e.hide=function(){e.parent.update({loading:!1,active:!0}),e.end(),_.onEndTransition(e.scope,function(){e.callback()}),e.reset()},e.reset=function(){e.progress={resources:!1,images:!1,html:!1},e.update({status:0})},e.updateLoading=function(){e.update()}}),riot.tag2("share-button",'<div class="shareButton__opener"></div> <div class="shareButton__items"> <div class="shareButton__item" data-share="fb" data-balloon="Поделиться в Facebook" data-balloon-color="blue"> <icon-fb></icon-fb> </div> <div class="shareButton__item" data-share="vk" data-balloon="Поделиться в ВКонтакте" data-balloon-pos="left" data-balloon-color="blue"> <icon-vk></icon-vk> </div> <div class="shareButton__item" data-share="tw" data-balloon="Поделиться в Twitter" data-balloon-pos="left" data-balloon-color="blue"> <icon-tw></icon-tw> </div> <div class="shareButton__item" data-share="dk" data-balloon="Поделиться в Одноклассниках" data-balloon-pos="left" data-balloon-color="blue"> <icon-dk></icon-dk> </div> </div>',"",'class="shareButton" data-pos="{opts.pos}"',function(t){}),riot.tag2("section-tutorial",'<div class="tutorial__shape" name="shape" riot-style="{step.style}"></div> <div name="msgBox" class="tutorial__message__wrapper" riot-style="{message.style}"> <div name="msgElem" class="tutorial__message" data-position="{message.position}" data-active="false"> <p class="pos-tr p-m c-grayLight fontSize-m">Шаг {num} из {steps.get().length}</p> <h3 class="tutorial__message__title">{message.title}</h3> <p class="tutorial__message__text">{message.text}</p> <div class="fontSize-0"> <button onclick="{nextStep}" onupdate="none" class="btn btn-m {endShow ? \'btn-success\' : \'btn-default-hover-success\'} mr-xs"> <svg if="{endShow}" class="btn-svg btn-svg-repeat" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50"> <path class="fill-white" d="M 39.78125 5.96875 A 2.0002 2.0002 0 0 0 38 8 L 38 12.5625 C 34.722701 9.1373523 30.10346 7 25 7 C 15.082241 7 7 15.082241 7 25 A 2.0002 2.0002 0 1 0 11 25 C 11 17.243759 17.243759 11 25 11 C 28.816123 11 32.256876 12.535728 34.78125 15 L 31 15 A 2.0002 2.0002 0 1 0 31 19 L 40 19 L 42 19 L 42 17 L 42 8 A 2.0002 2.0002 0 0 0 39.96875 5.96875 A 2.0002 2.0002 0 0 0 39.78125 5.96875 z M 40.78125 22.96875 A 2.0002 2.0002 0 0 0 39 25 C 39 32.757363 32.756392 39 25 39 C 21.184399 39 17.742551 37.46305 15.21875 35 L 19 35 A 2.0002 2.0002 0 1 0 19 31 L 10 31 L 8 31 L 8 33 L 8 42 A 2.0002 2.0002 0 1 0 12 42 L 12 37.4375 C 15.276425 40.860887 19.895994 43 25 43 C 34.917608 43 43 34.918637 43 25 A 2.0002 2.0002 0 0 0 40.96875 22.96875 A 2.0002 2.0002 0 0 0 40.78125 22.96875 z"></path> </svg> {endShow ? \'Повторить\' : \'Далее\'} </button> <button onclick="{hide}" class="btn btn-m btn-primary-hover">{endShow ? \'Перейти к выбору\' : \'Выйти из обзора\'}</button> </div> </div> </div>',"",'class="tutorial" data-open="{active}" active-zone="{step.activeZone}"',function(t){var e=this;e.active=!1,e.ready=!1,e.steps=new Baobab([]).root,e.borderColor="#0084ff",e.on("before-mount",function(){e.reset()}),e.on("messageShow",function(){e.message.active||(e.message.active=!0,_.onEndTransition(e.shape,function(){e.cordsMsg(),e.update(),e.msgElem.setAttribute("data-active",!0),_.onEndTransition(e.msgElem,function(){e.ready=!0})}))}),e.on("messageHide",function(){e.message.active=!1,e.msgElem.setAttribute("data-active",!1),_.onEndTransition(e.msgElem,function(){e.message.position=e.step.position,e.message.title=e.step.title,e.message.text=e.step.text,e.update()})}),e.reset=function(){e.start=!1,e.scope=null,e.message={active:!1,style:"clear:both",position:null,title:null,text:null},e.cursor=null,e.target=null,e.num=0,e.step={activeZone:!1,style:"clear:both"},e.endShow=!1},e.show=function(t,o){if(app.plugins.tutorial[o]){e.start=!0,e.steps.set(app.plugins.tutorial[o]),e.scope=$$(t),e.active=!0,e.trigger("messageHide"),e.nextStep();var i=_.debounce(e.render,100);app.$dom.window.on("resize.tutorial",function(){i()}),e.navigate.init()}else console.log("Not found tutorial: "+o)},e.nextStep=function(){e.changeStep("right")},e.prevStep=function(){e.num>1&&e.changeStep("left")},e.changeStep=function(t){e.ready=!1,e.cursor?e.trigger("messageHide"):e.trigger("messageShow"),e.endShow&&e.step.actions&&e.step.actions.toggle&&e.step.actions.toggle(e.target),e.cursor&&e.cursor[t]()?(e.actions(e.step,e.target,!0),e.cursor=e.cursor[t]()):e.cursor=e.steps.down(),e.step=e.cursor.get().call(),e.target=e.scope.find(e.step.target),e.start&&(e.message.position=e.step.position,e.message.title=e.step.title,e.message.text=e.step.text),e.render(),e.afterlag(function(){e.trigger("messageShow"),e.cursor[t]()||"right"!=t?e.endShow=!1:e.endShow=!0,e.update(),e.start||e.steps.get().length==e.num&&"right"==t?e.num=1:("right"==t&&e.num++,"left"==t&&e.num--),e.actions(e.step,e.target),e.start=!1})},e.render=function(){e.offset=e.target.offset(),e.step.offset&&(e.offset.top+=e.step.offset.top?e.step.offset.top:0,e.offset.left+=e.step.offset.left?e.step.offset.left:0);var t=e.target.data("width")||e.step.width,o=e.target.data("height")||e.step.height,i=e.target.data("zoom")||e.step.zoom,a=e.target.data("padding")||e.step.padding,s=t?parseInt(t):a?e.target.outerWidth()+2*parseInt(a):e.target.outerWidth(),n=o?parseInt(o):a?e.target.outerHeight()+2*parseInt(a):e.target.outerHeight(),c=i?parseFloat(i):1,l=300,r=l/2,d=(a?e.offset.left-parseInt(a):e.offset.left)+s/2,p=(a?e.offset.top-parseInt(a):e.offset.top)+n/2,u=d-r,v=p-r,m=s/l*c,_=n/s*l*c,g=Math.ceil(5/m),f=5*g,h=1e4+20/m,b=1.008*h,w=null;if("square"==e.step.figure)v=p-_/2,w="-webkit-transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+m+"); transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+m+"); width: "+l+"px; height: "+_+"px; box-shadow: inset 0 0 0 "+g+"px "+e.borderColor+", inset 0 0 "+f+"px rgba(0,0,0,0.4); border-radius: "+h+"px";else if("circle"==e.step.figure){var x=Math.sqrt(2)*Math.max(s,n)/2,k=2*x,$=k/l*c,g=Math.ceil(5/$),f=5*g;w="-webkit-transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+$+"); transform: translateX("+u+"px) translateY("+v+"px) translateZ(0) scale("+$+"); width: "+l+"px; height: "+l+"px; box-shadow: inset 0 0 0 "+g+"px "+e.borderColor+", inset 0 0 "+f+"px rgba(0,0,0,0.4); border-radius: "+b+"px"}e.step.style=w,e.targetWidth=s,e.targetHeight=n},e.cordsMsg=function(){var t=e.offset.top;t+e.msgBox.scrollHeight>app.sizes.height-40&&(t=e.offset.top+(app.sizes.height-40)-(t+e.msgBox.scrollHeight)),t<40&&(t=40),"right"==e.step.position?e.message.style="top:"+t+"px; left:"+(e.offset.left+e.targetWidth)+"px":"left"==e.step.position||"up"==e.step.position?e.message.style="top:"+t+"px; left:"+e.offset.left+"px":"down"==e.step.position&&(e.message.style="top:"+(e.offset.top+e.targetHeight)+"px; left:"+e.offset.left+"px")},e.actions=function(t,o,i){t.actions&&t.actions.toggle&&e.afterlag(function(){t.actions.toggle(o)},{delay:i?0:650,iterations:i?0:5})},e.navigate={init:function(){app.$dom.document.on("keydown.tutorial",function(t){e.ready&&(t.which!=KEY.RIGHT||e.endShow?t.which==KEY.LEFT&&e.prevStep():e.nextStep())})},destroy:function(){app.$dom.document.off("keydown.tutorial")}},e.hide=function(){e.active=!1,_.onEndTransition(e.root,function(){e.reset(),e.update()}),e.afterlag(function(){e.actions(e.step,e.target,!0)}),e.navigate.destroy(),app.$dom.window.off("resize.tutorial")},e.afterlag=function(t,e){var o={delay:0,iterations:1};e&&_.extend(o,e);var i=new Afterlag(o);i.run(t)}}),riot.tag2("screen-begin",'<div class="container pos-centered"> <div name="text1" class="row anim-text anim-text-bt {anim-textIn : animate.text1.in, anim-textOut : animate.text1.out}" delay-hide="s"> <div class="col-md-20 centered"> <div class="fontSize-52 fontWeight-3 text-center">Мы вам поможем подобрать готовый комплект для вашей подсветки.</div> </div> </div> </div> <div class="container pos-centered h60"> <div name="text2" class="row anim-text anim-text-bt {anim-textIn : animate.text2.in, anim-textOut : animate.text2.out}" delay-hide="m"> <div class="col-md-20 centered"> <div class="fontSize-44 fontWeight-3 text-center">Уделите несколько минут внимания, и выбранный комплект будет радовать вас долгие годы.</div> </div> </div> </div>',"",'class="section"',function(t){var e=this;$$(this.root);e.animate={text1:{in:!1,out:!1},text2:{in:!1,out:!1}},e.show=function(){$afterlag.run(function(){e.animate.text1.in=!0,e.update(),_.onEndAnimation(e.text1,function(){e.animate.text1.in=!1,e.animate.text1.out=!0,e.update(),_.onEndAnimation(e.text1,function(){e.animate.text1.out=!1,e.animate.text2.in=!0,e.update(),_.onEndAnimation(e.text2,function(){e.animate.text2.in=!1,e.animate.text2.out=!0,e.update(),_.onEndAnimation(e.text2,function(){e.animate.text2.out=!1,e.update(),$Screens.step1.show()})})})})},{iterations:5})}}),riot.tag2("screens","<screen-begin></screen-begin> <screen-step1></screen-step1> <screen-step2></screen-step2> <screen-podbor></screen-podbor>","",'class="screens section"',function(t){var e=this;e.on("before-mount",function(){$Screens={self:e,begin:e.tags["screen-begin"],step1:e.tags["screen-step1"],step2:e.tags["screen-step2"],podbor:e.tags["screen-podbor"]},$Screen=$Screens.podbor}),e.on("steps-hidden",function(){$Screens.begin.root.setAttribute("data-visible",!1),$Screens.step1.root.setAttribute("data-visible",!1),$Screens.step2.root.setAttribute("data-visible",!1)})}),riot.tag2("screen-step1",'<div class="container pos-centered h95v"> <div name="tooltip" class="tooltip anim-group1 anim-tb" delay-show="xl" data-duration="xl"> Выберите тип подстветки </div> <div class="row"> <div onclick="{select}" data-light="mono" onupdate="none" class="col-md-8 cell anim-group1 anim-bt" data-duration="xl"> <div class="column" data-column="1"> <div class="column__content"> <div class="column__content__text">Монохромная подстветка</div> </div> <div class="column__tooltip" data-tooltip="1"> <div class="column__tooltip__icon" data-icon="mono"></div> <span class="column__tooltip__title">Монохромная подстветка</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> <div onclick="{select}" data-light="rgb" onupdate="none" class="col-md-8 cell anim-group1 anim-scale-soft" delay-show="xs"> <div class="column" data-column="2"> <div class="column__content"> <div class="column__content__text">Мультицветная</div> </div> <div class="column__tooltip" data-tooltip="2"> <div class="column__tooltip__icon" data-icon="rgb"></div> <span class="column__tooltip__title">Мультицветная</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> <div onclick="{select}" data-light="lightrun" onupdate="none" class="col-md-8 cell anim-group1 anim-bt" delay-show="xs" data-duration="xl"> <div class="column" data-column="3"> <div class="column__content"> <div class="column__content__text">Бегущий огонь</div> </div> <div class="column__tooltip" data-tooltip="3"> <div class="column__tooltip__icon" data-icon="fire"></div> <span class="column__tooltip__title">Бегущий огонь</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> </div> </div> </div>',"",'class="section {showAnim-group1 : animate}" data-active="{active}"',function(t){var e=this;$$(this.root);e.active=!1,e.animate=!1,e.show=function(){$afterlag.run(function(){e.update({animate:!0})}),_.onEndTransition(e.tooltip,function(){e.update({active:!0})},{iterations:5})},e.select=function(t){e.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},e.hide=function(t){e.update({animate:!1,active:!1}),_.isFunction(t)&&_.onEndTransition(e.tooltip,function(){e.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("screen-step2",'<div class="section__overlay"></div> <div class="container pos-centered-h zIndex-10"> <div class="row"> <div class="col-md-10 centered main__tooltip">Выберайте близкий вам класс, в последующем его можно легко сменить или модифицировать.</div> </div> </div> <div class="arrow__left">Эконом</div> <div class="arrow__right">Люкс</div> <div class="container pos-centered header"> <div name="container" class="row anim-text anim-text-bt {anim-textIn : animate.in, anim-textOut : animate.out}"> <div class="col-md-24 centered"> <div class="title">Выбираем класс компонентов</div> </div> </div> </div> <div class="container pos-centered packs zIndex-10"> <div class="row packs__container"> <div class="col-md-8 pack pack-econom anim-group1 anim-bt" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="econom"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Эконом</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Эконом</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 28 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="led"> <div class="tooltip__icon"></div> <div class="tooltip__text">Светодиоды высокого качества</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> <div class="col-md-8 pack pack-norm anim-group1 anim-bt" delay-show="s" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="norm"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Норма</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Норма</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 31 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="ledribbon"> <div class="tooltip__icon"></div> <div class="tooltip__text">Лента класса LUX, супер надежная и качественная</div> </div> <div class="tooltip" data-tooltip="humidity"> <div class="tooltip__icon"></div> <div class="tooltip__text">Высокая степень влагозащищенности IP68</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> <div name="lastPack" class="col-md-8 pack pack-lux anim-group1 anim-bt" delay-show="l" data-duration="xl"> <div onclick="{select}" onupdate="none" class="pack__container" data-pack="lux"> <div class="pack__circle__big"> <div class="pack__circle__big__title">Люкс</div> <div class="pack__circle__big__tooltip"> <span class="pack__circle__big__tooltip__title">Люкс</span> <p>Отлично подойдет как декоративная подсветка внутри помещений, офисов и квартир</p> </div> </div> <div class="pack__circle__small"> 24 <div class="pack__circle__small__text">комплектов</div> </div> <div class="tooltips"> <div class="tooltip" data-tooltip="power-supply"> <div class="tooltip__icon"></div> <div class="tooltip__text">Компактные и очень надежные блоки питания</div> </div> <div class="tooltip" data-tooltip="ledribbon"> <div class="tooltip__icon"></div> <div class="tooltip__text">Лента класса LUX, супер надежная и качественная</div> </div> <div class="tooltip" data-tooltip="led"> <div class="tooltip__icon"></div> <div class="tooltip__text">Светодиоды высокого качества</div> </div> <div class="tooltip" data-tooltip="humidity"> <div class="tooltip__icon"></div> <div class="tooltip__text">Высокая степень влагозащищенности IP68</div> </div> <div class="tooltip" data-tooltip="ir-control"> <div class="tooltip__icon"></div> <div class="tooltip__text">Легкое и функциональное управление</div> </div> </div> </div> </div> </div> </div>',"",'class="section {showAnim-group1 : animate.pack}" data-active="{active}" data-overlay="false" data-tooltip="false" data-visible="false"',function(t){var e=this,o=$$(this.root);e.active=!1,e.animate={in:!1,out:!1,pack:!1},e.on("mount",function(){o.on("mouseenter mouseleave",".pack",function(t){"mouseenter"===t.type?e.root.setAttribute("data-overlay",!0):e.root.setAttribute("data-overlay",!1),t.currentTarget.getAttribute("class").match(/norm/)?e.root.setAttribute("data-tooltip",!0):e.root.setAttribute("data-tooltip",!1)})}),e.show=function(){e.root.setAttribute("data-visible",!0),$afterlag.run(function(){e.update({animate:{in:!0,out:!1,pack:!1}}),_.onEndAnimation(e.container,function(){e.update({animate:{in:!0,out:!1,pack:!0}}),_.onEndTransition(e.lastPack,function(){e.update({active:!0})})})},{iterations:5,timeout:500})},e.select=function(t){$afterlag.run(function(){e.hide(function(){$Router.nav("podbor"),$Screens.podbor.show(!0)})},{timeout:500}),$Config.set("pack",t.currentTarget.getAttribute("data-pack"))},e.hide=function(t){o.off(),e.root.setAttribute("data-overlay",!1),e.update({animate:{in:!1,out:!1,pack:!1}}),_.isFunction(t)&&_.onEndTransition(e.lastPack,function(){e.root.setAttribute("data-visible",!1),t()})}}),riot.tag2("ui-checkbox",'<label onclick="{onClick}" onupdate="{opts.onupdate ? opts.onupdate : ⁗self⁗}" class="checkbox {small : typeof opts.small !== \'undefined\'}" data-color="{opts.theme}"> <input type="checkbox" checked="{value}"> <span class="checkbox-control"></span> <span class="fontSize-{opts.size ? opts.size : \'m\'} {opts.color ? \'c-\' + opts.color : null}">{opts.title}</span> </label>',"","",function(t){var e=this,o=!1;e.on("before-mount",function(){if(e.opts.update&&e.opts.cursor)if(e.opts.group){var t=e.opts.cursor.get(e.opts.update);e.value=t==e.opts.value}else e.value=e.opts.cursor.get(e.opts.update);else void 0===e.opts.value?e.opts.value=e.value=!1:e.value=e.opts.value}),e.on("update",function(){o||(!e.opts.group&&!_.isBoolean(e.opts.value)&&e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):_.isBoolean(e.opts.value)&&e.opts.value!==e.value&&(e.value=e.opts.value))}),e.onClick=function(){o=!0,e.opts.group?e.value||(_.each(e.parent.tags,function(t,o){"ui-checkbox"==o&&_.each(t,function(t){t.opts.group==e.opts.group&&t.update({value:!1})})}),e.value=!e.value):e.value=!e.value,e.opts.commit===!0||"true"==e.opts.commit?e.parent.update():_.isFunction(e.opts.commit)?e.opts.commit.call(this,e.value,e.opts.i):e.opts.commit&&e.parent[e.opts.commit]&&e.parent[e.opts.commit](e.value,e.opts.i),e.opts.update&&e.opts.cursor&&(e.opts.group?e.opts.cursor.set(e.opts.update,e.opts.value):e.opts.cursor.set(e.opts.update,e.value)),setTimeout(function(){o=!1},5)}}),riot.tag2("ui-dropmenu",'<div if="{items && items.length}" class="dropmenu__wrapper"> <virtual each="{item in items}" no-reorder> <div if="{item && !item.divider}" onclick="{onSelect}" class="dropmenu__item"> {item.title ? item.title : item} </div> <div if="{item && item.divider}" class="dropmenu__item divider"></div> </virtual> </div>',"",'class="dropmenu" data-pos="{pos}" data-active="{active}"',function(t){var e=this,o=$$(e.root);e.active=!1,e.items=[],e.rootScroll=null,e.show=function(t){if(t&&t.elem){if(t.id||(t.id="0"),e._id&&e._id===t.id)return void e.hide();e.active&&e.hide(),t.id&&(e._id=t.id),e.pos=t.pos?t.pos:"center",e.items=t.menu,e.callback=t.callback,e.active=!0;var i=t.elem.offset(),a=0,s=0;"center"===e.pos?a=t.elem.outerWidth()/2:"left"===e.pos||"down-left"===e.pos?s=-(t.elem.outerHeight()/2):"right"!==e.pos&&"down-right"!==e.pos||(a=t.elem.outerWidth(),s=-(t.elem.outerHeight()/2)),e.rootScroll=t.rootScroll?t.rootScroll:app.$dom.root,setTimeout(function(){app.$dom.body.on("click.dropdown",function(t){e.hide()})},5),e.update(),o.css({top:e.rootScroll[0].scrollTop+i.top+t.elem.outerHeight()+"px",left:i.left+"px",marginLeft:a+"px",marginTop:s+"px"})}},e.hide=function(){app.$dom.body.off("click.dropdown"),e.active=!1,e._id&&(e._id=null),e.update()},e.onSelect=function(){var t=this.item._id||this.item;e.value=t,this.item&&_.isFunction(this.item.callback)&&this.item.callback(),e.callback&&e.callback(t||this.item)}}),riot.tag2("ui-input",'<input oninput="{onInput}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" class="input input-{opts.size ? opts.size : \'m\'}" riot-value="{value}" disabled="{typeof opts.disabled !== \'undefined\'}">',"","",function(t){var e=this;e.on("before-mount",function(){e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.value=e.opts.value}),e.on("update",function(){!e.opts.value&&e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.opts.value&&e.opts.value!==e.value&&(e.value=e.opts.value)}),e.onInput=function(t){var o=t.target.value;e.opts.commit===!0||"true"==e.opts.commit?e.parent.update():_.isFunction(e.opts.commit)?e.opts.commit.call(this,o,e.opts.i):e.opts.commit&&e.parent[e.opts.commit]&&e.parent[e.opts.commit](o,e.opts.i),e.opts.update&&e.opts.cursor&&e.opts.cursor.set(e.opts.update,o)}}),riot.tag2("ui-select",'<select onchange="{onChange}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" disabled="{disable}"> <option each="{item in opts.items}" selected="{item._id == value || item == value}" riot-value="{item._id ? item._id : item}">{item.title ? item.title : item}</option> </select>',"","class=\"select select-{opts.size ? opts.size : 'm'} {short : typeof opts.short !== 'undefined'}\"",function(t){var e=this;e.on("before-mount",function(){e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.value=e.opts.value,e.disable=e.opts.disable}),e.on("update",function(){!e.opts.value&&e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.opts.value&&e.opts.value!==e.value&&(e.value=e.opts.value),_.isBoolean(e.opts.disable)&&e.opts.disable!==e.disable&&(e.disable=e.opts.disable)}),e.onChange=function(t){var o=t.target.value;e.opts.commit===!0||"true"==e.opts.commit?e.parent.update():_.isFunction(e.opts.commit)?e.opts.commit.call(this,o,e.opts.i):e.opts.commit&&e.parent[e.opts.commit]&&e.parent[e.opts.commit](o,e.opts.i),e.opts.update&&e.opts.cursor&&e.opts.cursor.set(e.opts.update,o)}}),riot.tag2("ui-slider",'<span if="{opts.title}" class="input-title">{opts.title}</span> <input class="display-none" name="slider_input" type="range" riot-value="{opts.value}" min="{opts.min}" max="{opts.max}" step="{opts.step}" readonly="{opts.readonly}"> <input class="input input-{opts.size ? opts.size : \'m\'}" onkeyup="{onKeySlider}" name="slider_data" autocomplete="off" riot-value="{opts.value}" readonly="{opts.readonly}" type="{\'number\'}"> <div if="{opts.ed && !app.device.isPhone}" class="pos-tr c-blue fontSize-20 fontWeight-5 flex-centered w40 h100p">{opts.ed}</div>',"",'class="display-block pos-rel"',function(t){var e=this;e.input=e.slider_data,e.on("before-mount",function(){e.opts.update&&e.opts.cursor&&(e.opts.value=e.opts.cursor.get(e.opts.update))}),e.on("mount",function(){!e.opts.phone&&app.device.isPhone||(e.slider=$$(e.slider_input),e.value=e.opts.value,setTimeout(function(){e.slider.rangeslider({polyfill:!1,orientation:"horizontal",rangeClass:"rangeslider",horizontalClass:"rangeslider--horizontal",fillClass:"rangeslider-track",handleClass:"rangeslider-handle",onSlide:function(t,o){e.input.value=o,e.value=o,e.fnCommit(o)}})},5),e.slider.val(e.value),e.commit=e.opts.commit?e.opts.commit:null)}),e.change=function(t){e.slider?e.slider.val(t).change():e.input.value=t,e.value=t,e.fnCommit(t)},e.onKeySlider=function(t){var o=t.target.value;e.value=o,e.fnCommit(o)},e.fnCommit=function(t){e.commit===!0||"true"==e.commit?e.parent.update():_.isFunction(e.commit)?e.commit.call(this,t,e.opts.i):e.commit&&e.parent[e.commit]&&e.parent[e.commit](t,e.opts.i),e.opts.update&&e.opts.cursor&&e.opts.cursor.set(e.opts.update,t)},this.on("unmount",function(){e.slider&&e.slider.rangeslider("destroy")})}),riot.tag2("ui-switcher",'<div class="switch"> <input class="switch-input" type="checkbox" checked=""> <span class="switch-left">ON</span> <label class="switch-label">&nbsp;</label> <span class="switch-right">OFF</span> </div>',"",'onclick="{onClick}" onupdate="{opts.onupdate ? opts.onupdate : ⁗self⁗}" class="switcher" active="{value}"',function(t){var e=this;e.on("before-mount",function(){e.value=e.opts.value}),e.onClick=function(){e.value=!e.value,e.opts.commit===!0||"true"==e.opts.commit?e.parent.update():_.isFunction(e.opts.commit)?e.opts.commit.call(this,e.value,e.opts.i):e.opts.commit&&e.parent[e.opts.commit]&&e.parent[e.opts.commit](e.value,e.opts.i)}}),riot.tag2("ui-textarea",'<textarea oninput="{onInput}" onupdate="{opts.onupdate ? opts.onupdate : ⁗none⁗}" class="textarea textarea-{opts.size ? opts.size : \'m\'}" disabled="{typeof opts.disabled !== \'undefined\'}">{value}</textarea>',"","",function(t){var e=this;e.on("before-mount",function(){e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.value=e.opts.value}),e.on("update",function(){!e.opts.value&&e.opts.update&&e.opts.cursor?e.value=e.opts.cursor.get(e.opts.update):e.opts.value&&e.opts.value!==e.value&&(e.value=e.opts.value)}),e.onInput=function(t){var o=t.target.value;e.opts.commit===!0||"true"==e.opts.commit?e.parent.update():_.isFunction(e.opts.commit)?e.opts.commit.call(this,o,e.opts.i):e.opts.commit&&e.parent[e.opts.commit]&&e.parent[e.opts.commit](o,e.opts.i),e.opts.update&&e.opts.cursor&&e.opts.cursor.set(e.opts.update,o)}}),riot.tag2("screen-begin-mobile",'<div class="text__wrapper"> <div name="text1" class="anim-text anim-text-bt {anim-textIn : animate.text1.in, anim-textOut : animate.text1.out}" delay-hide="s"> Мы вам поможем подобрать готовый комплект для вашей подсветки </div> </div> <div class="text__wrapper"> <div name="text2" class="anim-text anim-text-bt {anim-textIn : animate.text2.in, anim-textOut : animate.text2.out}" delay-hide="m"> Уделите несколько минут внимания, и выбранный комплект будет радовать вас долгие годы </div> </div>',"",'class="section"',function(t){var e=this;$$(this.root);e.animate={text1:{in:!1,out:!1},text2:{in:!1,out:!1}},e.show=function(){$afterlag.m(function(){e.animate.text1.in=!0,e.update(),_.onEndAnimation(e.text1,function(){e.animate.text1.in=!1,e.animate.text1.out=!0,e.update(),_.onEndAnimation(e.text1,function(){e.animate.text1.out=!1,e.animate.text2.in=!0,e.update(),_.onEndAnimation(e.text2,function(){e.animate.text2.in=!1,e.animate.text2.out=!0,e.update(),_.onEndAnimation(e.text2,function(){e.animate.text2.out=!1,e.update(),$Screens.step1.show()})})})})})}}),riot.tag2("screens-mobile","<screen-begin-mobile></screen-begin-mobile> <screen-step1-mobile></screen-step1-mobile> <screen-step2-mobile></screen-step2-mobile> <screen-podbor-mobile></screen-podbor-mobile>","",'class="screens section"',function(t){
var e=this;e.on("before-mount",function(){$Screens={self:e,begin:e.tags["screen-begin-mobile"],step1:e.tags["screen-step1-mobile"],step2:e.tags["screen-step2-mobile"],podbor:e.tags["screen-podbor-mobile"]},$Screen=$Screens.podbor}),e.on("steps-hidden",function(){$Screens.begin.root.setAttribute("data-visible",!1),$Screens.step1.root.setAttribute("data-visible",!1),$Screens.step2.root.setAttribute("data-visible",!1)})}),riot.tag2("screen-step1-mobile",'<div class="rows pos-abs-full"> <div class="header"> <div name="tooltip" class="tooltip anim-group2 anim-tb">Выберите тип подсветки</div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" data-light="mono" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="xs">Монохромная</div> </div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" delay-show="xs" data-light="rgb" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="s">Мультицветная</div> </div> </div> <div onclick="{select}" class="row anim anim-group1 anim-lr-soft" delay-show="s" data-light="lightrun" onupdate="none" duration-hide="m" duration-show="l"> <div class="col-xs-10"> <div class="foto"> <div class="icon"></div> </div> </div> <div class="col-xs-14"> <div class="title anim-group2 anim-bt" delay-show="m">Бегущий огонь</div> </div> </div> </div>',"",'class="section" data-active="{active}"',function(t){var e=this;$$(this.root);e.active=!1,e.on("mount",function(){e.animate=new app.plugins.animate(e.root,{showAfter:1})}),e.show=function(){$afterlag.m(function(){e.animate.show()}),_.onEndTransition(e.tooltip,function(){e.update({active:!0})})},e.select=function(t){e.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},e.hide=function(t){e.animate.hide(),e.update({active:!1}),_.isFunction(t)&&_.onEndTransition(e.tooltip,function(){e.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("screen-step2-mobile",'<div class="rows pos-abs-full"> <div class="header"> <div name="tooltip" class="tooltip anim-group2 anim-tb" data-duration="xl">Выберите класс компонентов</div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" data-pack="lux" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft"> <div class="name"> <div class="count">24</div> комплектов <div class="price">от 12,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Люкс</div> </div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" delay-show="xs" data-pack="norm" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft" delay-show="xs"> <div class="name"> <div class="count">31</div> комплектов <div class="price">от 8,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Норма</div> </div> </div> <div onclick="{select}" class="row anim-group1 anim-lr-soft" data-duration="l" delay-show="s" data-pack="econom" onupdate="none"> <div class="col-xs-8 anim-group2 anim-lr-soft" delay-show="s"> <div class="name"> <div class="count">28</div> комплектов <div class="price">от 6,500 ₽</div> </div> </div> <div class="col-xs-8"> <div class="line"></div> </div> <div class="col-xs-8"> <div class="title">Эконом</div> </div> </div> </div>',"",'class="section" data-active="{active}"',function(t){var e=this;$$(this.root);e.active=!1,e.on("mount",function(){e.animate=new app.plugins.animate(e.root,{showAfter:1})}),e.show=function(){$afterlag.run(function(){e.animate.show()}),_.onEndTransition(e.tooltip,function(){e.update({active:!0})})},e.select=function(t){e.hide(function(){$Screens.step2.show()}),$State.set("light",t.currentTarget.getAttribute("data-light"))},e.hide=function(t){e.animate.hide(),e.update({active:!1}),_.isFunction(t)&&_.onEndTransition(e.tooltip,function(){e.root.setAttribute("data-visible",!1),$afterlag.run(function(){t()},{timeout:500})})}}),riot.tag2("connect-control","","",'onclick="{toggle}" class="connect__control" data-active="{$State.get(\'control\')}" data-hidden="{hidden}"',function(t){var e=this;e.hidden=!1,e.toggle=function(){$State.set("control",!$State.get("control"))},e.show=function(){e.root.setAttribute("data-hidden",!1)},e.hide=function(){e.root.setAttribute("data-hidden",!0)}}),riot.tag2("section-menu",'<div onclick="{$Screen.open.tutorial}" onupdate="none" class="menu__item menu__item__help" data-balloon="Обзор интерфейса" data-balloon-pos="left"> <icon-help size="l"></icon-help> </div> <div class="menu__wrapper"> <div class="menu__item" data-item="email" data-balloon="Отправить расчет на email" data-balloon-pos="left"> <icon-email></icon-email> </div> <div class="menu__item" data-item="order" data-balloon="Сделать предзаказ" data-balloon-pos="left"> <icon-order></icon-order> </div> <div class="menu__item" data-item="payment" data-balloon="Оплатить заказ" data-balloon-pos="left"> <icon-wallet></icon-wallet> </div> <div class="menu__item" data-item="callback" data-balloon="Заказать звонок" data-balloon-pos="left"> <icon-phone></icon-phone> </div> <div class="menu__item" data-item="votes" data-balloon="Оценить сервис" data-balloon-pos="left"> <icon-votes></icon-votes> </div> </div>',"",'class="menu"',function(t){}),riot.tag2("offer-manager",'<div class="container"> <div class="row pos-rel anim anim-scale-soft zIndex-1" duration-hide="s"> <div class="col-md-8"> <div class="pt-s pl-l pr-m lineHeight-xxl"> <div class="avatar" style="background-image:url(/assets/images/avatars/1.jpg)"></div> <div class="avatar__name">Ваш менеджер, Дарья</div> <div class="avatar__text">Мой телефон: <strong>8 (909) 900-12-20</strong></div> <div class="sign"><a target="_blank" class="link" href="http://ledtop-shop.ru">LEDTOP-Shop.ru</a> / приятного освещения!</div> </div> </div> <div class="col-md-16"> <div class="pl-m pr-xl"> <div class="message"> <div class="message__corner"></div> Михаил, в продолжении нашего разговора я подобрала по вашим требования комплект. Если потребуется, здесь вы можете модифицировать мою конфигурацию и внести свои изменения. <p>Для дальнейшей консультации, я для Вас на связи!</p> <button onclick="{hide}" class="btn btn-xl btn-white">Перейти к комплекту</button> </div> </div> </div> </div> <div class="row anim anim-scale-soft" duration-hide="s"> <div class="order__products"> <div class="col-md-offset-2 col-md-4 flex-centered"> <div class="order__product"> <div class="order__product__image__wrapper"> <img class="order__product__image" src="http://ledtop-shop.ru/files/catalog/014383.jpg"> </div> <div class="order__product__length">15м</div> <div class="order__product__price">840 ₽</div> </div> </div> <div class="col-md-1 flex-centered"> <div class="order__product__plus"></div> </div> <div class="col-md-4 flex-centered"> <div class="order__product"> <div class="order__product__image__wrapper"> <img class="order__product__image" src="http://ledtop-shop.ru/files/catalog/019122.jpg"> </div> <div class="order__product__price">452 ₽</div> </div> </div> <div class="col-md-1 flex-centered"> <div class="order__product__plus"></div> </div> <div class="col-md-4 flex-centered"> <div class="order__product"> <div class="order__product__image__wrapper"> <img class="order__product__image" src="http://ledtop-shop.ru/files/catalog/012985.jpg"> </div> <div class="order__product__price">457 ₽</div> </div> </div> <div class="col-md-1 flex-centered"> <div class="order__product__equal"></div> </div> <div class="col-md-5"> <div class="order__products__total__price"> 12,489 ₽ </div> </div> </div> </div> </div>',"","class=\"oScreen zIndex-100 {showAnim : $Config.get('offers', 'manager')}\" data-open=\"{$Config.get('offers', 'manager')}\" data-color=\"blue\"",function(t){this.hide=function(){$Config.select("offers","manager").set(!1)}}),riot.tag2("screen-podbor",'<offer-manager></offer-manager> <div class="wrapper"> <section-control></section-control> <section-pack-select></section-pack-select> <div class="content"> <div class="rows"> <div class="row"> <product-item name="ledribbon" item="{$Data.getProduct(\'ledribbon\')}"></product-item> <product-item name="power-supply" item="{$Data.getProduct(\'power-supply\')}"></product-item> <product-item name="ir-control" item="{$Data.getProduct(\'ir-control\')}"></product-item> </div> </div> </div> <section-menu></section-menu> </div> <section-pack-list></section-pack-list>',"",'class="section" data-active="false" data-visible="false" data-animate="true" is-animate="false"',function(t){var e=this,o=$$(this.root);e.active=!1,e.tooltipScreen=null,e.show=function(t){$Screens.self.trigger("steps-hidden"),e.root.setAttribute("data-visible",!0),e.update(),$afterlag.run(function(){t?(e.root.setAttribute("is-animate",!0),_.onEndTransition(e.menu,function(){e.root.setAttribute("data-animate",!1),e.root.setAttribute("data-active",!0),$Config.get("tutorial")&&e.open.tutorial(),$Router.params.set($State.get()),e.active=!0})):(e.root.setAttribute("data-animate",!1),e.root.setAttribute("data-active",!0),$Router.params.set($State.get()),e.active=!0)},{iterations:5,timeout:2e3})},e.open={tutorial:function(){$Tutorial.show(o,"podbor"),$Config.set("tutorial",!1)}},e.on("before-mount",function(){$Menu=e.tags["section-menu"],$Control=e.tags["section-control"],$Control.wrapper=$Control.tags["control-wrapper"],$Control.light=$Control.wrapper.tags["control-light"],$Control.humidity=$Control.wrapper.tags["control-humidity"],$Control.color=$Control.wrapper.tags["control-color"],$Control.length=$Control.wrapper.tags["control-length"],$Product={ledribbon:e.ledribbon._tag,"power-supply":e["power-supply"]._tag,"ir-control":e["ir-control"]._tag},e.sections={packList:e.tags["section-pack-list"]},e.setParams=function(){$Router.params.set($State.get())};var t=_.debounce(e.setParams,100);$State.on("update",function(o){var i=e.getPropValue(o),a=i.prop;i.value;a&&"control"==a&&$Product["ir-control"].update(),e.active&&t()}),$Config.on("update",function(t){var o=e.getPropValue(t),i=o.prop,a=o.value;i&&("showProducts"!=i||!a||$Config.get("tooltipScreen")||$Tutorial.active||$afterlag.run(function(){$Config.get("tooltipScreen")||("ledribbon"==a?e.tooltipScreen=$Product["ir-control"].tags["product-tooltip-screen"]:"power-supply"==a?e.tooltipScreen=$Product.ledribbon.tags["product-tooltip-screen"]:"ir-control"==a&&(e.tooltipScreen=$Product.ledribbon.tags["product-tooltip-screen"]),e.tooltipScreen.show())},{delay:500,iterations:5}))}),e.reRender()}),e.getFirstProduct=function(t){var e=$store[t].get()[0];return e.pack="norm",e},e.getProducts=function(t){var o=[];packs=["econom","norm","lux"];for(var i=0;i<packs.length;i++){var a=[];a=_.copyArray($store[t].get()).map(function(o,a){return o.pack=packs[i],"econom"!=packs[i]&&"lux"!=packs[i]||(o.article=e.store[t][packs[i]][a],o.photo="http://ledtop-shop.ru/files/catalog/"+o.article+".jpg"),o}),o=o.concat(a)}return o},e.store={ledribbon:{econom:["010523","020692"],lux:["013393","014676"]},power:{econom:["017831","012919","008889","010505"],lux:["017855","015992","011895","018308"]},control:{econom:["012987","021098","015422","020170","011439"],lux:["016678","016476","018609","016927","021025"]}},e.getTitleById=function(t){return"econom"==t?"Эконом":"norm"==t?"Норма":"lux"==t?"LUX":void 0},e.reRender=function(){var t=[{_id:"ledribbon",title:"Лента",product:e.getFirstProduct("ledribbon"),products:e.getProducts("ledribbon")},{_id:"power-supply",title:"Питание",product:e.getFirstProduct("power"),products:e.getProducts("power")},{_id:"ir-control",title:"Управление",product:e.getFirstProduct("control"),products:e.getProducts("control")}];$Data=_.extend(new Baobab(t),{getProduct:function(t){return $Data.select({_id:t})},getProductsList:function(t,e){return _.where($Data.select({_id:t}).get("products"),{pack:e})},getProductsCount:function(t){var e=$Data.select({_id:t}).get("products");return e?e.length:0}})},e.getPropValue=function(t){var e=t.data&&t.data.transaction&&t.data.transaction.length&&t.data.transaction[0].path?t.data.transaction[0].path[0]:null,o=t.data&&t.data.transaction&&t.data.transaction.length?t.data.transaction[0].value:null;return{prop:e,value:o}}}),riot.tag2("product-content",'<div class="title">{parent.opts.item.get().title}</div> <div class="product__label">{$Screen.getTitleById(parent.opts.item.get(\'product\').pack)}</div> <div onclick="{parent.tags[⁗products-list⁗].toggle}" onupdate="none" class="product__select"> <div class="product__select__count">{$Data.getProductsCount(parent.opts.item.get(⁗_id⁗))}</div> </div> <div class="product__item"> <div class="product__item__photo"> <img class="product__item__photo__image" riot-src="{parent.opts.item.get(\'product\').photo}"> </div> <div class="product__item__title">{parent.opts.item.get(\'product\').desc}</div> </div> <div class="product__price">{_.numberFormat(parent.opts.item.get(\'product\').price, 0, ⁗⁗, ⁗,⁗)} ₽ {⁗/ м⁗ : parent.opts.item.get(⁗_id⁗) == ⁗ledribbon⁗}</div> <div class="product__scribble">Не нужно управлять</div>',"",'class="product__content"',function(t){}),riot.tag2("product-item","<product-content></product-content> <connect-control></connect-control> <products-list></products-list> <product-tooltip-screen></product-tooltip-screen>","",'class="col-md-8 product" data-pack="{opts.item.get(\'product\').pack}" data-product="{opts.item.get(⁗_id⁗)}" data-hidden="{opts.item.get(⁗_id⁗) === ⁗ir-control⁗ && !$State.get(\'control\')}"',function(t){}),riot.tag2("product-tooltip-screen",'<div class="product__tooltip__screen__text"> Все представленные компоненты прошли тщательный отбор и отвечают всем современным требованиям. </div>',"",'onmouseover="{hide}" onupdate="none" class="product__tooltip__screen" data-active="{active}"',function(t){var e=this;e.active=!1,e.show=function(){e.update({active:!0}),$afterlag.run(function(){e.hide()},{delay:3e3,iterations:5}),$Config.set("tooltipScreen",!0)},e.hide=function(){e.active&&$afterlag.run(function(){e.update({active:!1})},{delay:1e3,iterations:5})}}),riot.tag2("products-list",'<div class="products__list__container"> <div onclick="{hide}" onupdate="none" class="products__list__close">{app.device.isPhone ? \'закрыть\' : \'скрыть\'}</div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'lux\').length}"> <div class="products__list__title"><i></i><i></i><i></i>ЛЮКС</div> <div class="rows products__list__items" data-items="lux"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), \'lux\')}" data-id="{item.article}" class="col-xs-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'norm\').length}"> <div class="products__list__title"><i></i><i></i>Норма</div> <div class="rows products__list__items" data-items="norm"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), ⁗norm⁗)}" data-id="{item.article}" class="col-xs-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> <div class="{display-none : !$Data.getProductsList(parent.opts.item.get(\'_id\'), \'econom\').length}"> <div class="products__list__title"><i></i>Эконом</div> <div class="rows products__list__items" data-items="econom"> <div class="row"> <div onclick="{onSelect}" onupdate="none" each="{item, i in $Data.getProductsList(parent.opts.item.get(\'_id\'), ⁗econom⁗)}" data-id="{item.article}" class="col-xs-8 products__list__item" data-active="{get.select(item)}"> <img riot-src="{item.photo}" class="products__list__item__image"> </div> </div> </div> </div> </div>',"",'class="products__list" data-active="false"',function(t){var e=this,o=$$(e.root);e.active=!1,e.selected=null,e.product=null,e.on("mount",function(){app.device.isMobile||o.on("mouseenter mouseleave",".products__list__item",function(t){if("true"!=t.currentTarget.getAttribute("data-active"))if("mouseenter"===t.type){e.product=_.copyArray(e.parent.opts.item.get("product"));var o=e.parent.opts.item.get("products",{article:t.currentTarget.getAttribute("data-id")});e.selected=e.product.article,e.parent.opts.item.set("product",o),$Product[e.parent.opts.item.get("_id")].update()}else e.selected=null,e.parent.opts.item.set("product",e.product),$Product[e.parent.opts.item.get("_id")].update()})}),e.get={select:function(t){return e.selected?e.selected===t.article:$Product[e.parent.opts.item.get("_id")].opts.item.get("product").article===t.article}},e.onSelect=function(){e.selected=null;var t=e.parent.opts.item.get("_id");$Product[t].opts.item.set("product",this.item),$Product[t].update(),app.device.isPhone&&e.update(),e.hide()},e.toggle=function(){!e.active&&$Config.get("showProducts")?$Notify.show({color:"primary",text:"Завершите предыдущий выбор"}):(e.active=!e.active,e.control())},e.show=function(){e.active=!0,e.control()},e.hide=function(){app.device.isPhone?e.parent.hide():(e.active=!1,e.control())},e.control=function(){e.parent.root.setAttribute("data-products",e.active),e.root.setAttribute("data-active",e.active),e.active?($Product["power-supply"].tags["connect-control"].hide(),$Config.set("showProducts",e.parent.opts.item.get("_id"))):($Product["power-supply"].tags["connect-control"].show(),$Config.set("showProducts",!1))}}),riot.tag2("icon-email",'<svg class="icon-email {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewbox="0 0 100 125" style="enable-background:new 0 0 100 100;" xml:space="preserve"><path d="M94,31.8c-0.9-1.2-2.3-1.8-3.9-1.8H37.9H5v3.1h27.2c-0.5,0.7-0.9,1.5-1.2,2.4l-1.1,3.9H12v3.1h17.1L26.8,51h-8v3h7.1 l-2.7,9.7c-0.4,1.6-0.2,3.3,0.7,4.4c0.9,1.2,2.3,1.8,3.9,1.8h52.8c3.1,0,6.1-2.4,6.9-5.5l7.2-28.3C95.2,34.6,94.9,33,94,31.8z M84.6,63.7c-0.4,1.7-2.2,3.2-3.9,3.2H27.8c-0.6,0-1.1-0.2-1.4-0.6s-0.4-1.1-0.2-1.8l5.9-21.4l20.4,9.6c1.8,0.8,3.9,1.3,6,1.3 s4.4-0.4,6.6-1.3l24.8-9.3L84.6,63.7z M91.8,35.5l-1.1,4.3L63.9,49.9c-3.6,1.4-7.4,1.4-10.2,0.1l-20.8-9.9l1.1-3.8 c0.5-1.7,2.3-3.2,4-3.2h52.2c0.6,0,1.1,0.2,1.4,0.6C91.9,34.1,92,34.8,91.8,35.5z"></path></svg>',"",'class="icon"',function(t){}),riot.tag2("icon-help",'<svg class="icon-help {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50"> <path d="M 25 0 C 11.204726 0 0 11.204726 0 25 C 0 38.795274 11.204726 50 25 50 C 38.795274 50 50 38.795274 50 25 C 50 11.204726 38.795274 0 25 0 z M 25 2 C 37.714394 2 48 12.285606 48 25 C 48 37.714394 37.714394 48 25 48 C 12.285606 48 2 37.714394 2 25 C 2 12.285606 12.285606 2 25 2 z M 25.28125 12.5 C 21.55125 12.5 19.07025 14.77575 18.53125 18.21875 C 18.49625 18.43475 18.62775 18.55775 18.84375 18.59375 L 21.09375 19 C 21.30975 19.036 21.464 18.93375 21.5 18.71875 C 21.93 16.53075 23.21075 15.3125 25.21875 15.3125 C 27.26375 15.3125 28.6875 16.61225 28.6875 18.65625 C 28.6875 19.87625 28.254 20.68525 27 22.40625 L 24.59375 25.71875 C 23.84075 26.75975 23.53125 27.5015 23.53125 28.9375 L 23.53125 30.40625 C 23.53125 30.62125 23.69125 30.754 23.90625 30.75 L 26.25 30.75 C 26.465 30.75 26.625 30.62125 26.625 30.40625 L 26.625 29.25 C 26.625 28.031 26.8455 27.5305 27.5625 26.5625 L 29.9375 23.28125 C 31.1575 21.59525 31.78125 20.31575 31.78125 18.59375 C 31.78125 15.04275 29.15325 12.5 25.28125 12.5 z M 23.71875 33.5 C 23.50275 33.5 23.34375 33.62875 23.34375 33.84375 L 23.34375 36.9375 C 23.34375 37.1525 23.50175 37.28125 23.71875 37.28125 L 26.4375 37.28125 C 26.6515 37.28125 26.8125 37.1535 26.8125 36.9375 L 26.8125 33.84375 C 26.8125 33.62975 26.6525 33.5 26.4375 33.5 L 23.71875 33.5 z"></path> </svg>',"",'class="icon"',function(t){}),riot.tag2("icon-order",'<svg class="icon-order {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 84 105" version="1.1" x="0px" y="0px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path d="M32,63.5 C32,59.9101491 29.0898509,57 25.5,57 C21.9101491,57 19,59.9101491 19,63.5 C19,67.0898509 21.9101491,70 25.5,70 C29.0898509,70 32,67.0898509 32,63.5 L32,63.5 L32,63.5 Z M23,63.5 C23,62.1192881 24.1192881,61 25.5,61 C26.8807119,61 28,62.1192881 28,63.5 C28,64.8807119 26.8807119,66 25.5,66 C24.1192881,66 23,64.8807119 23,63.5 L23,63.5 L23,63.5 Z M55,63.5 C55,59.9101491 52.0898509,57 48.5,57 C44.9101491,57 42,59.9101491 42,63.5 C42,67.0898509 44.9101491,70 48.5,70 C52.0898509,70 55,67.0898509 55,63.5 L55,63.5 L55,63.5 Z M63.0704626,37 L33,37 C31.8954305,37 31,36.1045695 31,35 C31,33.8954305 31.8954305,33 33,33 L65.303419,33 L68.0994479,27.9913415 L31,28 C30.1724565,28 29.4303796,27.4903422 29.1333088,26.7179582 L27.0433423,21.2840454 L16.171202,19.4727878 C15.0816614,19.2911977 14.345622,18.2607427 14.5272122,17.171202 C14.7088023,16.0816614 15.7392573,15.345622 16.828798,15.5272122 L28.828798,17.5272122 C29.5274622,17.6436562 30.1124258,18.1209518 30.3666912,18.7820418 L32.3542067,23.9495821 L71.5,24 C73.0264121,24 73.9901947,25.6410234 73.2467277,26.9741366 L58.7467277,52.9741366 C58.3935223,53.6074705 57.7251662,54 57,54 L17,54 C15.8954305,54 15,53.1045695 15,52 C15,50.8954305 15.8954305,50 17,50 L55.8133545,50 L58.6045499,45 L25.8143125,45 C24.709743,45 23.8143125,44.1045695 23.8143125,43 C23.8143125,41.8954305 24.709743,41 25.8143125,41 L60.1428571,41 C60.3655134,41 60.5796717,41.0363844 60.7797106,41.1035321 L63.0704626,37 L63.0704626,37 Z M46,63.5 C46,62.1192881 47.1192881,61 48.5,61 C49.8807119,61 51,62.1192881 51,63.5 C51,64.8807119 49.8807119,66 48.5,66 C47.1192881,66 46,64.8807119 46,63.5 L46,63.5 Z"></path></g></g></svg>',"",'class="icon"',function(t){}),riot.tag2("icon-phone",'<svg class="icon-phone {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewbox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M31.126,42.766c-1.342-5.693,11.38-11.721,9.041-19.423c-1.87-6.145-13.118-19.352-21.441-12.065 c-8.327,7.286-15.348,28.88,12.23,57.242c27.579,28.355,48.39,18.991,53.075,15.09s8.629-10.645,5.983-14.574 c-2.803-4.167-10.336-11.204-15.359-10.699c-5.001,0.501-6.768,3.856-10.395,7.576c-3.636,3.724-7.029,5.729-13.009,0 C45.263,60.189,32.143,47.086,31.126,42.766z"></path></svg>',"",'class="icon"',function(t){}),riot.tag2("icon-votes",'<svg class="icon-votes {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewbox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><g><polygon points="32.111,6.24 37.405,16.969 49.245,18.689 40.678,27.041 42.701,38.833 32.111,33.264 21.521,38.833 23.544,27.041 14.976,18.689 26.816,16.969 "></polygon><polygon points="33.351,41.639 37.982,49.781 47.316,50.584 41.002,57.504 43.123,66.63 34.59,62.764 26.567,67.601 27.608,58.289 20.528,52.154 29.704,50.267 "></polygon><polygon points="51.607,67.447 55.256,73.158 62.028,73.391 57.724,78.625 59.596,85.14 53.287,82.662 47.67,86.456 48.076,79.691 42.732,75.521 49.293,73.817 "></polygon><polygon points="71.423,81.543 73.914,84.924 78.112,84.787 75.667,88.201 77.094,92.15 73.091,90.881 69.775,93.46 69.746,89.26 66.271,86.903 70.256,85.578 "></polygon><polygon points="85.372,88.867 86.634,90.004 88.285,89.61 87.594,91.159 88.479,92.607 86.791,92.429 85.69,93.72 85.336,92.058 83.77,91.408 85.238,90.561 "></polygon></g></svg>',"",'class="icon"',function(t){}),riot.tag2("icon-wallet",'<svg class="icon-wallet {opts.size ? \'icon-\' + opts.size : \'icon-m\'}" fill-color="{opts.color ?   opts.color : \'blue\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewbox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><g><path d="M85.5,50.3c-1,0-1.8,0.8-1.8,1.8v8c0,0.5-0.2,0.8-0.3,0.9c-0.6,0.6-2.1,0.7-2.8,0.7h-16c-3.1,0-5.7-2.7-5.7-6 c0-3.3,2.5-6,5.7-6l11.6,0c0.2,0,2,0.2,3.5-1.2c1.3-1.2,2-3,2-5.4v-4.9c0-3-2.4-5.4-5.4-5.4H22.6c-0.9,0-1.7-1-1.7-2.1v-0.4 c0-3.6,1-3.6,1.8-3.6h50.1c1,0,1.8,0.8,1.8,1.8c0,1,0.8,1.8,1.8,1.8c1,0,1.8-0.8,1.8-1.8c0-3-2.4-5.4-5.4-5.4H22.7 c-3.6,0-5.4,2.4-5.4,7.2v0.4v45.1c0,3,2.4,5.4,5.4,5.4h53.5c3,0,5.4-2.4,5.4-5.4V65.3c1.2-0.1,3-0.4,4.3-1.7c1-0.9,1.5-2.1,1.5-3.6 v-8C87.3,51.1,86.5,50.3,85.5,50.3z M76.2,77.5H22.7c-1,0-1.8-0.8-1.8-1.8V36.4h55.3c1,0,1.8,0.8,1.8,1.8v4.9 c0,1.3-0.3,2.3-0.7,2.7c-0.4,0.3-0.8,0.3-0.9,0.3H64.6c-5.1,0-9.3,4.3-9.3,9.6c0,5.3,4.2,9.6,9.3,9.6l13.4,0v10.4 C78,76.7,77.2,77.5,76.2,77.5z"></path><circle cx="65.2" cy="55.7" r="3.3"></circle></g></svg>',"",'class="icon"',function(t){}),riot.tag2("section-control-mobile","<control-wrapper></control-wrapper>","",'class="section__control section-hidden" data-pos="left" data-short="true" data-open="false" data-shadow="true"',function(t){var e=this;e.show=function(){e.root.setAttribute("data-open",!0),$Screen.trigger("overlay",!0)},e.hide=function(){e.root.setAttribute("data-open",!1),$Screen.trigger("overlay",!1)}}),riot.tag2("section-menu-mobile",'<div onclick="{hide}" onupdate="none" class="button__close"></div> <div class="section__menu__title">Меню</div> <div onclick="{open.profile}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="email"></div> <div class="section__menu__item__title">Расчет на почту</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="order"></div> <div class="section__menu__item__title">Сделать предзаказ</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="payment"></div> <div class="section__menu__item__title">Оплатить заказ</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="callback"></div> <div class="section__menu__item__title">Заказать звонок</div> </div> <div onclick="{open.changePlan}" onupdate="none" class="section__menu__item"> <div class="section__menu__item__icon" data-icon="question"></div> <div class="section__menu__item__title">Как сделать выбор</div> </div>',"",'class="section__menu bg-white zIndex-2" data-pos="right" data-notfully="true" data-open="{active}"',function(t){var e=this;e.active=!1,e.show=function(){$Screen.trigger("hidden",!0),e.update({active:!0})},e.open={profile:function(){},changePlan:function(){$Sections.payment.section.show("premium")}},e.hide=function(){$Screen.trigger("hidden",!1),e.update({active:!1})}}),riot.tag2("section-navbar-mobile",'<div class="container"> <div class="row"> <div class="col-xs-17 cell-left"> <div onclick="{$Control.show}" onupdate="none" class="btn__control"></div> <div class="pack__name">НОРМА-2: одноцветная</div> </div> <div class="col-xs-7 cell-right"> <div class="btn__ok"></div> <div onclick="{$Menu.show}" onupdate="none" class="btn__menu"></div> </div> </div> </div>',"","",function(t){}),riot.tag2("screen-podbor-mobile",'<section-control-mobile></section-control-mobile> <section-menu-mobile></section-menu-mobile> <div class="section__content"> <section-navbar-mobile></section-navbar-mobile> <div class="content"> <div class="rows"> <div class="row"> <product-item-mobile name="ledribbon" item="{$Data.getProduct(\'ledribbon\')}"></product-item-mobile> <product-item-mobile name="power-supply" item="{$Data.getProduct(\'power-supply\')}"></product-item-mobile> <product-item-mobile name="ir-control" item="{$Data.getProduct(\'ir-control\')}"></product-item-mobile> </div> </div> </div> </div> <section-products-list-mobile></section-products-list-mobile> <section-product-mobile></section-product-mobile> <section-result-count></section-result-count> <div class="section__overlay"></div>',"",'class="section" data-active="false" data-overlay="false" data-visible="false" data-animate="true" is-animate="false" data-hidden="false"',function(t){var e=this,o=$$(this.root);e.active=!1,e.tooltipScreen=null,e.show=function(t){$Screens.self.trigger("steps-hidden"),e.root.setAttribute("data-visible",!0),e.update(),e.root.setAttribute("data-animate",!1),e.root.setAttribute("data-active",!0),$Router.params.set($State.get())},e.open={tutorial:function(){$Tutorial.show(o,"podbor"),$Config.set("tutorial",!1)}},e.on("overlay",function(t){e.root.setAttribute("data-overlay",t)}),e.on("hidden",function(t){e.root.setAttribute("data-hidden",t)}),e.on("before-mount",function(){$Navbar=e.tags["section-navbar-mobile"],$Menu=e.tags["section-menu-mobile"],$Control=e.tags["section-control-mobile"],$Control.wrapper=$Control.tags["control-wrapper"],$Control.light=$Control.wrapper.tags["control-light"],$Control.humidity=$Control.wrapper.tags["control-humidity"],$Control.color=$Control.wrapper.tags["control-color"],$Control.length=$Control.wrapper.tags["control-length"],$Product={ledribbon:e.ledribbon._tag,"power-supply":e["power-supply"]._tag,"ir-control":e["ir-control"]._tag},e.sections={resultCount:e.tags["section-result-count"],productsList:e.tags["section-products-list-mobile"]},e.setParams=function(){$Router.params.set($State.get())};var t=_.debounce(e.setParams,app.device.isMobile?500:100);$State.on("update",function(o){var i=e.getPropValue(o),a=i.prop;i.value;a&&"control"==a&&$Product["ir-control"].update(),e.active&&t()}),e.reRender()}),e.getFirstProduct=function(t){var e=$store[t].get()[0];return e.pack="norm",e},e.getProducts=function(t){var o=[];packs=["econom","norm","lux"];for(var i=0;i<packs.length;i++){var a=[];a=_.copyArray($store[t].get()).map(function(o,a){return o.pack=packs[i],"econom"!=packs[i]&&"lux"!=packs[i]||(o.article=e.store[t][packs[i]][a],o.photo="http://ledtop-shop.ru/files/catalog/"+o.article+".jpg"),o}),o=o.concat(a)}return o},e.store={ledribbon:{econom:["010523","020692"],lux:["013393","014676"]},power:{econom:["017831","012919","008889","010505"],lux:["017855","015992","011895","018308"]},control:{econom:["012987","021098","015422","020170","011439"],lux:["016678","016476","018609","016927","021025"]}},e.getTitleById=function(t){return"econom"==t?"Эконом":"norm"==t?"Норма":"lux"==t?"LUX":void 0},e.reRender=function(){var t=[{_id:"ledribbon",title:"Лента",product:e.getFirstProduct("ledribbon"),products:e.getProducts("ledribbon")},{_id:"power-supply",title:"Блок питания",product:e.getFirstProduct("power"),products:e.getProducts("power")},{_id:"ir-control",title:"Управление",product:e.getFirstProduct("control"),products:e.getProducts("control")}];$Data=_.extend(new Baobab(t),{getProduct:function(t){return $Data.select({_id:t})},getProductsList:function(t,e){return _.where($Data.select({_id:t}).get("products"),{pack:e})},getProductsCount:function(t){var e=$Data.select({_id:t}).get("products");return e?e.length:0}})},e.getPropValue=function(t){var e=t.data&&t.data.transaction&&t.data.transaction.length&&t.data.transaction[0].path?t.data.transaction[0].path[0]:null,o=t.data&&t.data.transaction&&t.data.transaction.length?t.data.transaction[0].value:null;
return{prop:e,value:o}}}),riot.tag2("product-content-mobile",'<div class="title">{parent.opts.item.get().title}</div> <div class="product__label">{$Screen.getTitleById(parent.opts.item.get(\'product\').pack)}</div> <div class="rows product__item"> <div class="col-xs-12 product__item__text"> <p>{parent.opts.item.get(\'product\').desc}</p> </div> <div class="col-xs-12 product__item__photo"> <img class="product__item__photo__image" riot-src="{parent.opts.item.get(\'product\').photo}"> </div> </div> <div class="product__price">+ {_.numberFormat(parent.opts.item.get(\'product\').price, 0, ⁗⁗, ⁗,⁗)} <span class="rub">₽</span> {⁗/ м⁗ : parent.opts.item.get(⁗_id⁗) == ⁗ledribbon⁗}</div> <div onclick="{open.products}" class="product__select"> <div class="product__select__count">{$Data.getProductsCount(parent.opts.item.get(⁗_id⁗))}</div> </div> <div class="product__scribble">Не нужно управлять</div>',"",'class="display-block"',function(t){var e=this;e.open={products:function(){$Screen.sections.productsList.show(e.parent.opts.item.get("_id"))}}}),riot.tag2("product-item-mobile","<product-content-mobile></product-content-mobile> <connect-control></connect-control>","",'class="col-xs-24 product" data-pack="{opts.item.get(\'product\').pack}" data-product="{opts.item.get(⁗_id⁗)}" data-hidden="{opts.item.get(⁗_id⁗) === ⁗ir-control⁗ && !$State.get(\'control\')}"',function(t){this.on("before-mount",function(){})}),riot.tag2("section-product-mobile","","","",function(t){}),riot.tag2("section-products-list-mobile","<products-list></products-list>","",'class="pos-abs-full section-hidden overflowY-auto bg-white zIndex-2" data-pos="right" data-open="false"',function(t){var e=this;e.show=function(t){e.tags["products-list"].root.setAttribute("data-product",t),e.root.setAttribute("data-open",!0),$Screen.trigger("hidden",!0),e.opts.item=$Data.getProduct(t),e.tags["products-list"].update()},e.hide=function(){e.root.setAttribute("data-open",!1),$Screen.trigger("hidden",!1)}}),riot.tag2("section-result-count",'<div class="title">Найдено</div> <div class="count">36</div> <div class="subtitle">комплектов</div>',"","",function(t){}),riot.tag2("control-color-item","","",'class="control__color__items" data-items="{opts.content.split(\'|\').length}"',function(t){this.on("updated",function(){this.root.innerHTML=this.opts.content.split("|").map(function(t){return'<span class="control__color__item color-'+t+'"></span>'}).join("")})}),riot.tag2("control-color",'<div onclick="{toggle}" onupdate="none" class="control__icon" data-color="{$State.get(\'color\')}"> <control-color-item content="{$State.get(\'color\')}">{item}</control-color-item> </div> <div class="control__container {flex-row-left-center : !app.device.isPhone}"> <div class="control__container__title">цвет свечения</div> <div onclick="{select}" onupdate="none" each="{item in items}" class="control__color" data-active="{item == $State.get(\'color\')}" data-color="{item}"> <control-color-item content="{item}">{item}</control-color-item> </div> </div>',"",'class="control" data-active="{active}"',function(t){var e=this;e.active=!1,e.items=["blue","cool_white","day_white","warm_white","yellow","green","ir850","orange","pink","red","violet"],e.toggle=function(){e.update({active:!e.active})},e.select=function(){$State.set("color",this.item),e.hide()},e.hide=function(){e.update({active:!1})}}),riot.tag2("control-humidity",'<div onclick="{toggle}" onupdate="none" class="control__value">{$State.get(\'humidity\')}</div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="humidity"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">влагозащищенность</div> <div class="nowrap fontSize-0"> <div onclick="{select}" onupdate="none" each="{item in items}" class="pos-rel display-inlineBlock" data-balloon="{item.tooltip}" data-balloon-pos="up"> <div class="btn {item.title == $State.get(\'humidity\') ? \'btn-primary\' : \'btn-primary-hover\'} btn-m w40 p0 mlr-xxs text-center"> {item.title} </div> </div> </div> </div>',"",'class="control" data-active="{active}"',function(t){var e=this;e.active=!1,e.items=[{title:"P64",tooltip:"Защита от брызгов воды"},{title:"P65",tooltip:"Защита от струй воды"},{title:"P66",tooltip:"Сильная струя воды"},{title:"P67",tooltip:"Погружение под воду"}],e.toggle=function(){e.update({active:!e.active})},e.select=function(){$State.set("humidity",this.item.title),e.hide()},e.hide=function(){e.update({active:!1})}}),riot.tag2("control-length",'<div onclick="{toggle}" onupdate="none" class="control__value">{$State.get(\'length\')}м</div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="length"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">длина ленты</div> <ui-slider update="length" cursor="{$State.select()}" phone="true" size="m" min="5" max="50" step="5" ed="м" readonly="true"></ui-slider> <div onclick="{hide}" onupdate="none" class="control__button"></div> </div>',"",'class="control" data-active="{active}"',function(t){var e=this;e.active=!1,e.toggle=function(){e.update({active:!e.active})},e.hide=function(){e.update({active:!1})}}),riot.tag2("control-light",'<div onclick="{toggle}" onupdate="none" class="control__light__icon" data-light="{$State.get(\'light\')}"></div> <div onclick="{toggle}" onupdate="none" class="control__icon" data-icon="light"></div> <div class="control__container flex-row-left-center"> <div class="control__container__title">тип освещения</div> <div onclick="{select}" onupdate="none" each="{item in items}" class="control__light__item" data-balloon="{item.tooltip}" data-balloon-pos="up" data-light="{item.title}"></div> </div>',"",'class="control" data-active="{active}"',function(t){var e=this;e.active=!1,e.items=[{title:"mono",tooltip:"Монохромная"},{title:"rgb",tooltip:"Мультицветная"},{title:"lightrun",tooltip:"Бегущий огонь"}],e.toggle=function(){e.update({active:!e.active})},e.select=function(){$State.set("light",this.item.title),e.hide()},e.hide=function(){e.update({active:!1})}}),riot.tag2("control-wrapper",'<div if="{app.device.isPhone}" onclick="{parent.hide}" onupdate="none" class="control back"></div> <div if="{!app.device.isPhone}" onclick="{open}" onupdate="none" class="control"> <div class="button__ok"></div> </div> <control-light></control-light> <control-humidity></control-humidity> <control-color></control-color> <control-length></control-length>',"",'class="control__wrapper"',function(t){var e=this;e.open=function(){}}),riot.tag2("section-control",'<div if="{!app.device.isPhone}" class="total"> <div class="total__title">=</div> <div class="total__price">12,489 <span class="total__price__rub">₽</span></div> </div> <control-wrapper></control-wrapper>',"",'class="section__control"',function(t){}),riot.tag2("section-pack-list",'<div class="pos-rel anim-group1 anim-fadeIn zIndex-2" duration-show="l" duration-hide="xs" delay-show="m"> <div onclick="{hide}" onupdate="none" class="button__close opacity-50" data-pos="top-right" data-color="gray"></div> </div> <div class="pack__select__list__header anim-group1 anim-tb-soft" duration-show="l" duration-hide="none" delay-show="xs"> <div class="container"> <div class="row"> <div class="col-md-8"> <div class="pack__select__list__title">Эконом</div> </div> <div class="col-md-8"> <div class="pack__select__list__title">Норма</div> </div> <div class="col-md-8"> <div class="pack__select__list__title">ЛЮКС</div> </div> </div> </div> </div> <div class="pack__select__list__content anim-group1 anim-bt-soft" duration-show="m" duration-hide="none" delay-show="xs"> <div class="container"> <div class="row"> <div class="col-md-8 pack__select__list" data-pack="econom"> <div class="pack__select__list__items"> <div onclick="{select}" onupdate="none" each="{item in items1}" class="pack__select__list__item__container" data-balloon="{item.tooltip}" data-balloon-fontsize="small" data-balloon-length="large" data-balloon-color="blue" data-balloon-pos="down"> <div class="pack__select__list__item" data-active="{pack == item._id}"> {item.title} <div class="pack__select__list__item__price">{_.numberFormat(item.price, 0, ⁗⁗, ⁗,⁗)} ₽</div> </div> </div> </div> </div> <div class="col-md-8 pack__select__list" data-pack="norm"> <div class="pack__select__list__items"> <div onclick="{select}" onupdate="none" each="{item in items2}" class="pack__select__list__item__container" data-balloon="{item.tooltip}" data-balloon-fontsize="small" data-balloon-length="large" data-balloon-color="blue" data-balloon-pos="down"> <div class="pack__select__list__item" data-active="{pack == item._id}"> {item.title} <div class="pack__select__list__item__price">{_.numberFormat(item.price, 0, ⁗⁗, ⁗,⁗)} ₽</div> </div> </div> </div> </div> <div class="col-md-8 pack__select__list" data-pack="lux"> <div class="pack__select__list__items"> <div onclick="{select}" onupdate="none" each="{item in items3}" class="pack__select__list__item__container" data-balloon="{item.tooltip}" data-balloon-fontsize="small" data-balloon-length="large" data-balloon-color="blue" data-balloon-pos="down"> <div class="pack__select__list__item" data-active="{pack == item._id}"> {item.title} <div class="pack__select__list__item__price">{_.numberFormat(item.price, 0, ⁗⁗, ⁗,⁗)} ₽</div> </div> </div> </div> </div> </div> </div> </div>',"",'class="oScreen zIndex-10 {showAnim-group1 : active}" data-open="{active}" data-color="dark"',function(t){var e=this;e.pack="1",e.on("before-mount",function(){for(var t=1,o=1;o<4;o++){e["items"+o]=[];for(var i=1;i<_.random(3,6);i++){var a={_id:t,title:"Одноцветная подсветка #"+i,price:_.random(5e3,15e3),tooltip:"Lorem ipsum dolor sit amet, consectetur adipisicing elit"};e["items"+o].push(a),t++}}}),e.show=function(){e.update({active:!0})},e.select=function(){e.pack=this.item._id,e.hide()},e.hide=function(){e.update({active:!1})}}),riot.tag2("section-pack-select",'<div class="pack__select__value">НОРМА-2: Одноцветная подсветка</div> <div class="pack__select__lines"></div>',"",'onclick="{$Screen.sections.packList.show}" onupdate="none" class="pack__select"',function(t){});